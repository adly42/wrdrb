{"ast":null,"code":"var _jsxFileName = \"/Users/adlyazim/Documents/GitHub/ENTI674-Team3-FinalProject/client/src/pages/OutfitPlanner.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { supabase } from '../utils/supabaseClient';\nimport { useNavigate } from 'react-router-dom';\nimport '../styles/main.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n// Utility function for safe date handling\nconst getFormattedDate = event => {\n  try {\n    if (!event.start) return null;\n\n    // For all-day events\n    if (event.start.date) {\n      return new Date(event.start.date).toLocaleDateString('en-CA');\n    }\n\n    // For events with specific times\n    if (event.start.dateTime) {\n      return new Date(event.start.dateTime).toLocaleDateString('en-CA');\n    }\n    return null;\n  } catch (error) {\n    console.error('Error formatting date:', error);\n    return null;\n  }\n};\nconst OutfitPlanner = () => {\n  _s();\n  const navigate = useNavigate();\n  const [clothingItems, setClothingItems] = useState([]);\n  const [selectedItems, setSelectedItems] = useState([]);\n  const [savedOutfits, setSavedOutfits] = useState([]);\n  const [showSaveModal, setShowSaveModal] = useState(false);\n  const [outfitName, setOutfitName] = useState('');\n  const [outfitOccasion, setOutfitOccasion] = useState('');\n  const [selectedCategory, setSelectedCategory] = useState('');\n  const [scheduledOutfits, setScheduledOutfits] = useState([]);\n  const [showScheduleModal, setShowScheduleModal] = useState(false);\n  const [selectedOutfitForSchedule, setSelectedOutfitForSchedule] = useState(null);\n  const [scheduleDate, setScheduleDate] = useState('');\n  const [isGoogleCalendarConnected, setIsGoogleCalendarConnected] = useState(false);\n  const [activeTab, setActiveTab] = useState('planner');\n  const [calendarEvents, setCalendarEvents] = useState([]);\n  const [showCalendarView, setShowCalendarView] = useState(true);\n  const [weatherData, setWeatherData] = useState([]);\n  const [weatherLoading, setWeatherLoading] = useState(false);\n  const [weatherError, setWeatherError] = useState(null);\n  const categories = ['Jacket', 'Shirt', 'T-Shirt', 'Sweater', 'Dress', 'Skirt', 'Pants', 'Shorts', 'Jeans', 'Shoes', 'Accessories'];\n  const categoryOrder = ['Headwear', 'Jacket', 'Shirt', 'T-Shirt', 'Sweater', 'Dress', 'Skirt', 'Pants', 'Shorts', 'Jeans', 'Shoes', 'Accessories'];\n  useEffect(() => {\n    fetchClothingItems();\n    fetchSavedOutfits();\n    checkOutfitSchedulesTable();\n    fetchScheduledOutfits();\n    ensureUserSettingsTable();\n    checkGoogleCalendarConnection();\n  }, []);\n  useEffect(() => {\n    if (showCalendarView && calendarEvents.length > 0) {\n      fetchWeatherData();\n    }\n  }, [showCalendarView, calendarEvents]);\n  const fetchClothingItems = async () => {\n    try {\n      // Get the current user's ID\n      const {\n        data: {\n          user\n        }\n      } = await supabase.auth.getUser();\n      if (!user) {\n        throw new Error('No authenticated user found');\n      }\n      const {\n        data,\n        error\n      } = await supabase.from('clothing_items').select('*').eq('user_id', user.id);\n      if (error) throw error;\n      if (data) setClothingItems(data);\n    } catch (error) {\n      console.error('Error fetching clothing items:', error);\n    }\n  };\n  const fetchSavedOutfits = async () => {\n    try {\n      // Get the current user's ID\n      const {\n        data: {\n          user\n        }\n      } = await supabase.auth.getUser();\n      if (!user) {\n        throw new Error('No authenticated user found');\n      }\n      const {\n        data,\n        error\n      } = await supabase.from('outfits').select('*').eq('user_id', user.id).order('created_at', {\n        ascending: false\n      });\n      if (error) throw error;\n      if (data) {\n        // Fetch the actual clothing items for each outfit\n        const outfitsWithItems = await Promise.all(data.map(async outfit => {\n          const {\n            data: items\n          } = await supabase.from('clothing_items').select('*').in('id', outfit.items);\n          return {\n            ...outfit,\n            items: items || []\n          };\n        }));\n        setSavedOutfits(outfitsWithItems);\n      }\n    } catch (error) {\n      console.error('Error fetching saved outfits:', error);\n    }\n  };\n  const fetchScheduledOutfits = async () => {\n    try {\n      console.log('Fetching scheduled outfits...');\n      const {\n        data: {\n          user\n        }\n      } = await supabase.auth.getUser();\n      if (!user) {\n        console.log('No authenticated user found');\n        return;\n      }\n      console.log('Authenticated user:', user.id);\n\n      // First check if the outfit_schedules table exists\n      const {\n        error: tableCheckError\n      } = await supabase.from('outfit_schedules').select('id').limit(1);\n      if (tableCheckError) {\n        console.log('Outfit schedules table may not exist yet:', tableCheckError);\n        return;\n      }\n      console.log('Outfit schedules table exists');\n\n      // Fetch scheduled outfits with outfit details\n      const {\n        data: schedules,\n        error: schedulesError\n      } = await supabase.from('outfit_schedules').select('*').eq('user_id', user.id).order('date', {\n        ascending: true\n      });\n      if (schedulesError) {\n        console.error('Error fetching scheduled outfits:', schedulesError);\n        return;\n      }\n      console.log('Fetched scheduled outfits:', schedules);\n      if (schedules && schedules.length > 0) {\n        // Fetch outfit details for each schedule\n        const outfitIds = schedules.map(schedule => schedule.outfit_id);\n        console.log('Fetching outfit details for IDs:', outfitIds);\n        const {\n          data: outfits,\n          error: outfitsError\n        } = await supabase.from('outfits').select('*').in('id', outfitIds);\n        if (outfitsError) {\n          console.error('Error fetching outfit details:', outfitsError);\n          return;\n        }\n        console.log('Fetched outfit details:', outfits);\n\n        // Fetch clothing items for each outfit\n        const outfitItemsMap = new Map();\n        for (const outfit of outfits) {\n          console.log(`Fetching items for outfit ${outfit.id}:`, outfit.items);\n          const {\n            data: items,\n            error: itemsError\n          } = await supabase.from('clothing_items').select('*').in('id', outfit.items);\n          if (itemsError) {\n            console.error(`Error fetching items for outfit ${outfit.id}:`, itemsError);\n            continue;\n          }\n          outfitItemsMap.set(outfit.id, items);\n          console.log(`Items for outfit ${outfit.id}:`, items);\n        }\n\n        // Combine schedules with outfit details and items\n        const schedulesWithOutfits = schedules.map(schedule => {\n          const outfit = outfits.find(o => o.id === schedule.outfit_id);\n          if (outfit) {\n            const items = outfitItemsMap.get(outfit.id) || [];\n            return {\n              ...schedule,\n              outfit: {\n                ...outfit,\n                items\n              }\n            };\n          }\n          return schedule;\n        });\n        console.log('Combined schedules with outfits:', schedulesWithOutfits);\n        setScheduledOutfits(schedulesWithOutfits);\n      } else {\n        console.log('No scheduled outfits found');\n        setScheduledOutfits([]);\n      }\n    } catch (error) {\n      console.error('Error in fetchScheduledOutfits:', error);\n    }\n  };\n  const checkOutfitSchedulesTable = async () => {\n    try {\n      // Try to query the table to see if it exists\n      const {\n        error\n      } = await supabase.from('outfit_schedules').select('id').limit(1);\n      if (error) {\n        console.error('Error checking outfit_schedules table:', error);\n\n        // If the error indicates the table doesn't exist, create it\n        if (error.code === '42P01') {\n          // PostgreSQL error code for undefined_table\n          console.log('Creating outfit_schedules table...');\n          await createOutfitSchedulesTable();\n        }\n      } else {\n        console.log('outfit_schedules table exists');\n      }\n    } catch (error) {\n      console.error('Error in checkOutfitSchedulesTable:', error);\n    }\n  };\n  const createOutfitSchedulesTable = async () => {\n    try {\n      // This is a simplified approach - in a real app, you'd use migrations\n      // or have the table created by your backend\n      console.log('This feature requires the outfit_schedules table to be created in Supabase.');\n      console.log('Please run the SQL in the outfit_schedules.sql file in your Supabase SQL editor.');\n\n      // Show a more user-friendly message\n      alert('The outfit scheduling feature requires database setup. Please contact the administrator.');\n    } catch (error) {\n      console.error('Error creating outfit_schedules table:', error);\n    }\n  };\n  const handleRandomize = () => {\n    const newSelectedItems = [];\n    const usedCategories = new Set();\n\n    // Shuffle the clothing items\n    const shuffledItems = [...clothingItems].sort(() => Math.random() - 0.5);\n\n    // Select one item from each category\n    for (const item of shuffledItems) {\n      if (!usedCategories.has(item.category)) {\n        newSelectedItems.push(item);\n        usedCategories.add(item.category);\n      }\n    }\n    setSelectedItems(newSelectedItems);\n  };\n  const handleItemSelect = item => {\n    // Check if the item is already selected\n    const isAlreadySelected = selectedItems.some(i => i.id === item.id);\n    if (isAlreadySelected) {\n      // If already selected, remove it\n      setSelectedItems(selectedItems.filter(i => i.id !== item.id));\n    } else {\n      // If not selected, remove any existing item of the same category and add this one\n      const filteredItems = selectedItems.filter(i => i.category !== item.category);\n      setSelectedItems([...filteredItems, item]);\n    }\n  };\n  const handleItemUnselect = item => {\n    // Remove the item from selected items\n    setSelectedItems(selectedItems.filter(i => i.id !== item.id));\n  };\n  const handleSaveOutfit = async () => {\n    if (!outfitName || selectedItems.length === 0) {\n      alert('Please provide a name for the outfit and select at least one item');\n      return;\n    }\n    try {\n      // Get the current user's ID\n      const {\n        data: {\n          user\n        }\n      } = await supabase.auth.getUser();\n      if (!user) {\n        throw new Error('No authenticated user found');\n      }\n      console.log('Saving outfit with data:', {\n        user_id: user.id,\n        name: outfitName,\n        occasion: outfitOccasion || null,\n        items: selectedItems.map(item => item.id)\n      });\n      const {\n        data,\n        error\n      } = await supabase.from('outfits').insert([{\n        user_id: user.id,\n        name: outfitName,\n        occasion: outfitOccasion || null,\n        items: selectedItems.map(item => item.id)\n      }]).select();\n      if (error) {\n        console.error('Supabase error details:', error);\n        throw error;\n      }\n      console.log('Successfully saved outfit:', data);\n      setShowSaveModal(false);\n      setOutfitName('');\n      setOutfitOccasion('');\n      fetchSavedOutfits();\n    } catch (error) {\n      console.error('Error saving outfit:', error);\n      if (error instanceof Error) {\n        alert(`Error saving outfit: ${error.message}`);\n      } else {\n        alert('Error saving outfit. Please check the console for details.');\n      }\n    }\n  };\n  const handleDeleteOutfit = async outfitId => {\n    if (window.confirm('Are you sure you want to delete this outfit?')) {\n      try {\n        const {\n          error\n        } = await supabase.from('outfits').delete().eq('id', outfitId);\n        if (error) throw error;\n        fetchSavedOutfits();\n      } catch (error) {\n        console.error('Error deleting outfit:', error);\n        alert('Error deleting outfit');\n      }\n    }\n  };\n  const checkGoogleCalendarConnection = async () => {\n    try {\n      console.log('Checking Google Calendar connection...');\n      const {\n        data: {\n          user\n        }\n      } = await supabase.auth.getUser();\n      if (!user) {\n        console.log('No authenticated user found');\n        return;\n      }\n\n      // Check if user has Google Calendar connected\n      const {\n        data: settings,\n        error: settingsError\n      } = await supabase.from('user_settings').select('google_calendar_connected, google_access_token, google_token_expiry').eq('user_id', user.id).single();\n      if (settingsError) {\n        console.error('Error checking user settings:', settingsError);\n        return;\n      }\n      console.log('User settings for Google Calendar:', settings);\n\n      // Check if the token is expired\n      if (settings !== null && settings !== void 0 && settings.google_token_expiry && new Date(settings.google_token_expiry) < new Date()) {\n        console.log('Google token is expired');\n        setIsGoogleCalendarConnected(false);\n        return;\n      }\n\n      // Check if we have a valid access token\n      if (!(settings !== null && settings !== void 0 && settings.google_access_token)) {\n        console.log('No Google access token found');\n        setIsGoogleCalendarConnected(false);\n        return;\n      }\n\n      // If we have a valid token and the connection is marked as connected, we're good\n      if (settings.google_calendar_connected) {\n        console.log('Google Calendar is connected');\n        setIsGoogleCalendarConnected(true);\n\n        // Fetch calendar events to make sure the connection is working\n        await fetchCalendarEvents();\n      } else {\n        console.log('Google Calendar is not connected');\n        setIsGoogleCalendarConnected(false);\n      }\n    } catch (error) {\n      console.error('Error checking Google Calendar connection:', error);\n      setIsGoogleCalendarConnected(false);\n    }\n  };\n  const connectGoogleCalendar = async () => {\n    try {\n      console.log('Starting Google Calendar connection...');\n\n      // Check if user is authenticated\n      const {\n        data: {\n          user\n        }\n      } = await supabase.auth.getUser();\n      if (!user) {\n        throw new Error('No authenticated user found');\n      }\n\n      // Load the Google API client\n      if (typeof window.gapi === 'undefined') {\n        console.log('Loading Google API script...');\n        await new Promise((resolve, reject) => {\n          const script = document.createElement('script');\n          script.src = 'https://apis.google.com/js/api.js';\n          script.onload = resolve;\n          script.onerror = reject;\n          document.body.appendChild(script);\n        });\n      }\n\n      // Initialize the Google API client\n      console.log('Initializing Google API client...');\n      try {\n        await new Promise((resolve, reject) => {\n          window.gapi.load('client', async () => {\n            try {\n              await window.gapi.client.init({\n                apiKey: process.env.REACT_APP_GOOGLE_API_KEY,\n                discoveryDocs: ['https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest']\n              });\n              console.log('Google API client initialized successfully');\n              resolve();\n            } catch (error) {\n              console.error('Error initializing Google API client:', error);\n              reject(error);\n            }\n          });\n        });\n      } catch (error) {\n        console.error('Error loading Google API client:', error);\n        throw new Error('Failed to initialize Google API client. Please check your API credentials.');\n      }\n\n      // Use the new Google Identity Services for authentication\n      console.log('Signing in with Google...');\n      try {\n        // Create a token client\n        const tokenClient = window.google.accounts.oauth2.initTokenClient({\n          client_id: process.env.REACT_APP_GOOGLE_CLIENT_ID,\n          scope: 'https://www.googleapis.com/auth/calendar',\n          callback: async response => {\n            if (response.error) {\n              console.error('Error getting token:', response.error);\n              throw new Error('Failed to get Google token');\n            }\n            console.log('Got Google token:', response);\n\n            // Save the access token to user settings\n            console.log('Saving access token to user settings...');\n            try {\n              // First check if the user settings record exists\n              const {\n                data: existingSettings,\n                error: checkError\n              } = await supabase.from('user_settings').select('*').eq('user_id', user.id).single();\n              if (checkError && checkError.code !== 'PGRST116') {\n                // PGRST116 is \"not found\" error\n                console.error('Error checking user settings:', checkError);\n                throw checkError;\n              }\n\n              // If the record doesn't exist, create it\n              if (!existingSettings) {\n                console.log('Creating new user settings record...');\n                const {\n                  error: createError\n                } = await supabase.from('user_settings').insert({\n                  user_id: user.id,\n                  google_calendar_connected: true,\n                  google_access_token: response.access_token,\n                  google_token_expiry: new Date(Date.now() + response.expires_in * 1000).toISOString()\n                });\n                if (createError) {\n                  console.error('Error creating user settings:', createError);\n                  throw createError;\n                }\n              } else {\n                // Update the existing record\n                console.log('Updating existing user settings record...');\n                try {\n                  const {\n                    data: updateData,\n                    error: updateError\n                  } = await supabase.from('user_settings').update({\n                    google_calendar_connected: true,\n                    google_access_token: response.access_token,\n                    google_token_expiry: new Date(Date.now() + response.expires_in * 1000).toISOString()\n                  }).eq('user_id', user.id).select();\n                  if (updateError) {\n                    console.error('Error updating user settings:', updateError);\n                    console.error('Error details:', {\n                      code: updateError.code,\n                      message: updateError.message,\n                      details: updateError.details,\n                      hint: updateError.hint\n                    });\n\n                    // If the error is about the column not existing, try to update without that field\n                    if (updateError.message && updateError.message.includes('google_token_expiry')) {\n                      console.log('Trying to update without the google_token_expiry field...');\n                      const {\n                        error: retryError\n                      } = await supabase.from('user_settings').update({\n                        google_calendar_connected: true,\n                        google_access_token: response.access_token\n                      }).eq('user_id', user.id);\n                      if (retryError) {\n                        console.error('Error updating user settings without expiry:', retryError);\n                        throw retryError;\n                      }\n                      console.log('Successfully updated user settings without expiry field');\n                    } else {\n                      throw updateError;\n                    }\n                  } else {\n                    console.log('Update successful:', updateData);\n                  }\n                } catch (error) {\n                  console.error('Error saving Google tokens:', error);\n                  alert('Failed to save Google Calendar connection. Please try again.');\n                  return;\n                }\n              }\n              console.log('Google Calendar connected successfully');\n              setIsGoogleCalendarConnected(true);\n\n              // Fetch calendar events\n              await fetchCalendarEvents();\n            } catch (error) {\n              console.error('Error saving Google tokens:', error);\n              alert('Failed to save Google Calendar connection. Please try again.');\n            }\n          },\n          error_callback: error => {\n            console.error('Error in token client:', error);\n            alert('Failed to authenticate with Google. Please try again.');\n          }\n        });\n\n        // Request a token\n        tokenClient.requestAccessToken();\n      } catch (error) {\n        console.error('Error signing in with Google:', error);\n        alert('Failed to sign in with Google. Please try again.');\n      }\n    } catch (error) {\n      console.error('Error connecting to Google Calendar:', error);\n      alert('Failed to connect to Google Calendar. Please try again.');\n    }\n  };\n  const fetchCalendarEvents = async () => {\n    try {\n      console.log('Fetching calendar events...');\n\n      // Check if user is authenticated\n      const {\n        data: {\n          user\n        }\n      } = await supabase.auth.getUser();\n      if (!user) {\n        throw new Error('No authenticated user found');\n      }\n\n      // Get user settings\n      const {\n        data: settings,\n        error: settingsError\n      } = await supabase.from('user_settings').select('*').eq('user_id', user.id).single();\n      if (settingsError) {\n        console.error('Error fetching user settings:', settingsError);\n        throw settingsError;\n      }\n      if (!(settings !== null && settings !== void 0 && settings.google_access_token)) {\n        console.log('No Google access token found');\n        setIsGoogleCalendarConnected(false);\n        return;\n      }\n\n      // Check if token is expired\n      const tokenExpiry = new Date(settings.google_token_expiry);\n      if (tokenExpiry < new Date()) {\n        console.log('Google token expired, requesting new token...');\n        setIsGoogleCalendarConnected(false);\n        await connectGoogleCalendar();\n        return;\n      }\n\n      // Ensure Google API client is loaded\n      if (typeof window.gapi === 'undefined') {\n        console.log('Loading Google API script...');\n        await new Promise((resolve, reject) => {\n          const script = document.createElement('script');\n          script.src = 'https://apis.google.com/js/api.js';\n          script.onload = resolve;\n          script.onerror = reject;\n          document.body.appendChild(script);\n        });\n      }\n\n      // Initialize the Google API client\n      console.log('Initializing Google API client...');\n      try {\n        await new Promise((resolve, reject) => {\n          window.gapi.load('client', async () => {\n            try {\n              await window.gapi.client.init({\n                apiKey: process.env.REACT_APP_GOOGLE_API_KEY,\n                discoveryDocs: ['https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest']\n              });\n              console.log('Google API client initialized successfully');\n              resolve();\n            } catch (error) {\n              console.error('Error initializing Google API client:', error);\n              reject(error);\n            }\n          });\n        });\n      } catch (error) {\n        console.error('Error loading Google API client:', error);\n        throw new Error('Failed to initialize Google API client');\n      }\n\n      // Set the access token\n      console.log('Setting Google API token...');\n      try {\n        window.gapi.client.setToken({\n          access_token: settings.google_access_token\n        });\n      } catch (error) {\n        console.error('Error setting Google API token:', error);\n        throw new Error('Failed to set Google API token');\n      }\n\n      // Get the current date and date 30 days from now\n      const now = new Date();\n      const thirtyDaysFromNow = new Date();\n      thirtyDaysFromNow.setDate(now.getDate() + 30);\n\n      // Format dates for the API\n      const timeMin = now.toISOString();\n      const timeMax = thirtyDaysFromNow.toISOString();\n\n      // Fetch events from Google Calendar\n      console.log('Fetching events from Google Calendar...');\n      try {\n        const response = await window.gapi.client.calendar.events.list({\n          'calendarId': 'primary',\n          'timeMin': timeMin,\n          'timeMax': timeMax,\n          'showDeleted': false,\n          'singleEvents': true,\n          'orderBy': 'startTime'\n        });\n        console.log('Google Calendar API response:', response);\n        if (response.result.items) {\n          const events = response.result.items;\n          console.log('Fetched calendar events:', events);\n\n          // Update scheduled outfits based on event descriptions\n          const updatedSchedules = [...scheduledOutfits];\n          events.forEach(event => {\n            if (event.description) {\n              const outfitIdMatch = event.description.match(/Outfit ID: (\\d+)/);\n              if (outfitIdMatch) {\n                const outfitId = outfitIdMatch[1];\n                const existingScheduleIndex = updatedSchedules.findIndex(schedule => schedule.outfit_id === outfitId && new Date(schedule.date).toISOString().split('T')[0] === new Date(event.start.dateTime).toISOString().split('T')[0]);\n                if (existingScheduleIndex === -1) {\n                  const eventDate = getFormattedDate(event);\n                  if (eventDate) {\n                    updatedSchedules.push({\n                      id: `temp-${Date.now()}`,\n                      outfit_id: outfitId,\n                      date: eventDate,\n                      user_id: user.id,\n                      created_at: new Date().toISOString(),\n                      google_event_id: event.id\n                    });\n                  }\n                }\n              }\n            }\n          });\n          setScheduledOutfits(updatedSchedules);\n          setCalendarEvents(events);\n          setIsGoogleCalendarConnected(true);\n        } else {\n          console.log('No events found in the specified time range');\n          setCalendarEvents([]);\n        }\n      } catch (error) {\n        console.error('Error fetching calendar events:', error);\n        throw new Error('Failed to fetch calendar events');\n      }\n    } catch (error) {\n      console.error('Error in fetchCalendarEvents:', error);\n      setIsGoogleCalendarConnected(false);\n      setCalendarEvents([]);\n    }\n  };\n  const handleScheduleOutfit = async () => {\n    if (!selectedOutfitForSchedule || !scheduleDate) {\n      alert('Please select an outfit and a date');\n      return;\n    }\n    try {\n      const {\n        data: {\n          user\n        }\n      } = await supabase.auth.getUser();\n      if (!user) {\n        throw new Error('No authenticated user found');\n      }\n      console.log('Scheduling outfit for user:', user.id);\n\n      // Format the date to ensure consistency\n      const formattedDate = new Date(scheduleDate).toLocaleDateString('en-CA');\n      console.log('Scheduling outfit for date:', formattedDate);\n      console.log('Selected outfit:', selectedOutfitForSchedule);\n\n      // Create outfit schedule in Supabase\n      const {\n        data: scheduleData,\n        error: scheduleError\n      } = await supabase.from('outfit_schedules').insert([{\n        user_id: user.id,\n        outfit_id: selectedOutfitForSchedule.id,\n        date: formattedDate\n      }]).select().single();\n      if (scheduleError) {\n        console.error('Error creating schedule:', scheduleError);\n        throw scheduleError;\n      }\n      console.log('Created outfit schedule:', scheduleData);\n\n      // If Google Calendar is connected, create calendar event\n      if (isGoogleCalendarConnected) {\n        try {\n          // Get user's Google Calendar settings\n          const {\n            data: settings\n          } = await supabase.from('user_settings').select('google_access_token').eq('user_id', user.id).single();\n          if (!(settings !== null && settings !== void 0 && settings.google_access_token)) {\n            console.log('No Google access token found');\n            return;\n          }\n\n          // Make sure gapi is loaded and initialized\n          if (typeof window.gapi === 'undefined' || !window.gapi.client) {\n            console.log('Loading Google API...');\n            await new Promise((resolve, reject) => {\n              const script = document.createElement('script');\n              script.src = 'https://apis.google.com/js/api.js';\n              script.onload = () => {\n                window.gapi.load('client', async () => {\n                  try {\n                    await window.gapi.client.init({\n                      apiKey: process.env.REACT_APP_GOOGLE_API_KEY,\n                      discoveryDocs: ['https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest']\n                    });\n                    console.log('Google Calendar API initialized successfully');\n                    resolve(true);\n                  } catch (error) {\n                    reject(error);\n                  }\n                });\n              };\n              script.onerror = reject;\n              document.body.appendChild(script);\n            });\n          }\n\n          // Set the access token for API calls\n          window.gapi.client.setToken({\n            access_token: settings.google_access_token\n          });\n\n          // Create a Date object for the selected date\n          const selectedDate = new Date(scheduleDate);\n\n          // Set the time to noon in the user's timezone\n          selectedDate.setHours(12, 0, 0, 0);\n          const event = {\n            'summary': `Outfit: ${selectedOutfitForSchedule.name}`,\n            'description': `Outfit ID: ${selectedOutfitForSchedule.id}`,\n            'start': {\n              'dateTime': selectedDate.toISOString(),\n              'timeZone': Intl.DateTimeFormat().resolvedOptions().timeZone\n            },\n            'end': {\n              'dateTime': new Date(selectedDate.getTime() + 8 * 60 * 60 * 1000).toISOString(),\n              // 8 hours later\n              'timeZone': Intl.DateTimeFormat().resolvedOptions().timeZone\n            }\n          };\n          console.log('Creating Google Calendar event:', event);\n          const response = await window.gapi.client.calendar.events.insert({\n            'calendarId': 'primary',\n            'resource': event\n          });\n          console.log('Google Calendar event created:', response);\n\n          // Update outfit schedule with Google Calendar event ID\n          await supabase.from('outfit_schedules').update({\n            google_event_id: response.result.id\n          }).eq('id', scheduleData.id);\n          console.log('Updated schedule with Google event ID');\n        } catch (error) {\n          console.error('Error creating Google Calendar event:', error);\n          alert('Failed to create Google Calendar event. The outfit was scheduled, but not added to your calendar.');\n        }\n      }\n      setShowScheduleModal(false);\n      setSelectedOutfitForSchedule(null);\n      setScheduleDate('');\n\n      // Fetch updated scheduled outfits\n      console.log('Fetching updated scheduled outfits after scheduling');\n      await fetchScheduledOutfits();\n      if (isGoogleCalendarConnected) {\n        console.log('Fetching updated calendar events after scheduling');\n        await fetchCalendarEvents();\n      }\n    } catch (error) {\n      console.error('Error scheduling outfit:', error);\n      alert('Error scheduling outfit. Please try again.');\n    }\n  };\n  const handleDeleteSchedule = async scheduleId => {\n    if (window.confirm('Are you sure you want to remove this outfit from your schedule?')) {\n      try {\n        const {\n          error\n        } = await supabase.from('outfit_schedules').delete().eq('id', scheduleId);\n        if (error) throw error;\n        fetchScheduledOutfits();\n      } catch (error) {\n        console.error('Error deleting scheduled outfit:', error);\n        alert('Error removing outfit from schedule');\n      }\n    }\n  };\n  const getSortedItems = items => {\n    return [...items].sort((a, b) => {\n      const indexA = categoryOrder.indexOf(a.category);\n      const indexB = categoryOrder.indexOf(b.category);\n      return indexA - indexB;\n    });\n  };\n  const formatDate = dateString => {\n    // Create a date object in the user's timezone\n    const date = new Date(dateString + 'T00:00:00');\n    return date.toLocaleDateString('en-US', {\n      weekday: 'long',\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric'\n    });\n  };\n  const ensureUserSettingsTable = async () => {\n    try {\n      console.log('Ensuring user_settings table has correct structure...');\n\n      // Check if user is authenticated\n      const {\n        data: {\n          user\n        }\n      } = await supabase.auth.getUser();\n      if (!user) {\n        console.log('No authenticated user found');\n        return;\n      }\n\n      // Check if user_settings table exists\n      const {\n        error: tableCheckError\n      } = await supabase.from('user_settings').select('id').limit(1);\n      if (tableCheckError) {\n        console.error('Error checking user_settings table:', tableCheckError);\n        console.log('Please run the SQL script to create the user_settings table with the correct structure');\n        return;\n      }\n\n      // Check if user has a settings record\n      const {\n        data: settings,\n        error: settingsError\n      } = await supabase.from('user_settings').select('*').eq('user_id', user.id).single();\n      if (settingsError) {\n        console.log('User settings record not found, creating one...');\n        const {\n          error: createError\n        } = await supabase.from('user_settings').insert({\n          user_id: user.id,\n          google_calendar_connected: false,\n          google_access_token: null,\n          google_refresh_token: null,\n          google_token_expiry: null\n        });\n        if (createError) {\n          console.error('Error creating user settings:', createError);\n          return;\n        }\n        console.log('User settings record created');\n      } else {\n        console.log('User settings record exists:', settings);\n\n        // Check if the record has all required fields\n        const needsUpdate = !settings.google_token_expiry;\n        if (needsUpdate) {\n          console.log('Updating user settings record with missing fields...');\n          const {\n            error: updateError\n          } = await supabase.from('user_settings').update({\n            google_token_expiry: new Date(Date.now() + 3600000).toISOString() // 1 hour from now\n          }).eq('user_id', user.id);\n          if (updateError) {\n            console.error('Error updating user settings:', updateError);\n            console.log('Please run the SQL script to add the missing column to the user_settings table');\n            return;\n          }\n          console.log('User settings record updated with missing fields');\n        }\n      }\n    } catch (error) {\n      console.error('Error ensuring user_settings table:', error);\n    }\n  };\n  const fetchWeatherData = async () => {\n    try {\n      setWeatherLoading(true);\n      setWeatherError(null);\n      const apiKey = process.env.REACT_APP_OPENWEATHER_API_KEY;\n      if (!apiKey) {\n        throw new Error('OpenWeather API key is not configured');\n      }\n      const city = 'Toronto'; // You can make this dynamic based on user location\n\n      // Fetch 5-day forecast\n      const forecastResponse = await fetch(`https://api.openweathermap.org/data/2.5/forecast?q=${city}&appid=${apiKey}&units=metric`);\n      if (!forecastResponse.ok) {\n        throw new Error('Failed to fetch forecast data');\n      }\n      const forecastData = await forecastResponse.json();\n\n      // Process forecast data to get one reading per day at noon\n      const dailyForecasts = forecastData.list.filter((item, index) => index % 8 === 0) // Get one reading per day (every 8th item as data is in 3-hour intervals)\n      .map(item => {\n        // Map OpenWeather condition codes to our local weather icons\n        let iconPath = '/images/weather-icons/clear-day.png'; // Default icon\n\n        const condition = item.weather[0].main.toLowerCase();\n        const description = item.weather[0].description.toLowerCase();\n        if (condition.includes('clear')) {\n          // Check if it's day or night\n          const hour = new Date(item.dt * 1000).getHours();\n          iconPath = hour >= 6 && hour < 18 ? '/images/weather-icons/clear-day.png' : '/images/weather-icons/clear-night.png';\n        } else if (condition.includes('cloud')) {\n          iconPath = '/images/weather-icons/cloudy.png';\n        } else if (condition.includes('rain')) {\n          if (description.includes('drizzle')) {\n            iconPath = '/images/weather-icons/drizzle.png';\n          } else {\n            iconPath = '/images/weather-icons/rain.png';\n          }\n        } else if (condition.includes('snow')) {\n          iconPath = '/images/weather-icons/snow.png';\n        } else if (condition.includes('thunderstorm')) {\n          iconPath = '/images/weather-icons/thunderstorm.png';\n        } else if (condition.includes('mist') || condition.includes('fog') || condition.includes('haze')) {\n          iconPath = '/images/weather-icons/fog.png';\n        }\n        return {\n          date: new Date(item.dt * 1000).toISOString().split('T')[0],\n          // Format as YYYY-MM-DD\n          temperature: Math.round(item.main.temp),\n          condition: item.weather[0].main,\n          icon: iconPath\n        };\n      }).slice(0, 5); // Get only 5 days\n\n      console.log('Fetched weather data:', dailyForecasts);\n      setWeatherData(dailyForecasts);\n    } catch (error) {\n      console.error('Error fetching weather:', error);\n      setWeatherError(error instanceof Error ? error.message : 'Failed to load weather data');\n    } finally {\n      setWeatherLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"dashboard\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"dashboard-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header-content\",\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"dashboard-title\",\n          children: \"Outfit Planner\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1157,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1156,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => navigate('/'),\n        className: \"btn btn-secondary\",\n        style: {\n          fontSize: \"16px\",\n          color: \"#fefefd\",\n          backgroundColor: \"#d07d6b\",\n          padding: \"10px 20px\",\n          textTransform: \"uppercase\",\n          fontWeight: \"bold\",\n          borderRadius: \"5px\",\n          border: \"none\",\n          cursor: \"pointer\",\n          display: \"inline-block\",\n          textDecoration: \"none\",\n          transition: \"all 0.3s ease-in-out\"\n        },\n        children: \"Back to Dashboard\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1159,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1155,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"outfit-planner-tabs\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: `tab-button ${activeTab === 'planner' ? 'active' : ''}`,\n        onClick: () => setActiveTab('planner'),\n        style: {\n          fontSize: \"16px\",\n          color: activeTab === 'planner' ? \"#d07d6b\" : \"#3b3b3b\",\n          backgroundColor: \"transparent\",\n          padding: \"10px 20px\",\n          textTransform: \"uppercase\",\n          fontWeight: \"bold\",\n          borderRadius: \"5px\",\n          border: \"none\",\n          borderBottom: activeTab === 'planner' ? \"2px solid #d07d6b\" : \"2px solid transparent\",\n          cursor: \"pointer\",\n          display: \"inline-block\",\n          textDecoration: \"none\",\n          transition: \"all 0.3s ease-in-out\"\n        },\n        children: \"Outfit Planner\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1178,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `tab-button ${activeTab === 'calendar' ? 'active' : ''}`,\n        onClick: () => setActiveTab('calendar'),\n        style: {\n          fontSize: \"16px\",\n          color: activeTab === 'calendar' ? \"#d07d6b\" : \"#3b3b3b\",\n          backgroundColor: \"transparent\",\n          padding: \"10px 20px\",\n          textTransform: \"uppercase\",\n          fontWeight: \"bold\",\n          borderRadius: \"5px\",\n          border: \"none\",\n          borderBottom: activeTab === 'calendar' ? \"2px solid #d07d6b\" : \"2px solid transparent\",\n          cursor: \"pointer\",\n          display: \"inline-block\",\n          textDecoration: \"none\",\n          transition: \"all 0.3s ease-in-out\"\n        },\n        children: \"Calendar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1199,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1177,\n      columnNumber: 7\n    }, this), activeTab === 'calendar' && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"outfit-calendar-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"calendar-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"section-title\",\n          children: \"Outfit Calendar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1225,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"calendar-view-toggle\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: `btn btn-secondary ${showCalendarView ? 'active' : ''}`,\n            onClick: () => setShowCalendarView(true),\n            style: {\n              fontSize: \"16px\",\n              color: showCalendarView ? \"#fefefd\" : \"#6b7280\",\n              backgroundColor: showCalendarView ? \"#d07d6b\" : \"#f3f4f6\",\n              padding: \"10px 20px\",\n              textTransform: \"uppercase\",\n              fontWeight: \"bold\",\n              borderRadius: \"5px\",\n              border: \"none\",\n              cursor: \"pointer\",\n              display: \"inline-block\",\n              textDecoration: \"none\",\n              transition: \"all 0.3s ease-in-out\"\n            },\n            children: \"Calendar View\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1227,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: `btn btn-secondary ${!showCalendarView ? 'active' : ''}`,\n            onClick: () => setShowCalendarView(false),\n            style: {\n              fontSize: \"16px\",\n              color: !showCalendarView ? \"#fefefd\" : \"#6b7280\",\n              backgroundColor: !showCalendarView ? \"#d07d6b\" : \"#f3f4f6\",\n              padding: \"10px 20px\",\n              textTransform: \"uppercase\",\n              fontWeight: \"bold\",\n              borderRadius: \"5px\",\n              border: \"none\",\n              cursor: \"pointer\",\n              display: \"inline-block\",\n              textDecoration: \"none\",\n              transition: \"all 0.3s ease-in-out\"\n            },\n            children: \"List View\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1247,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1226,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1224,\n        columnNumber: 11\n      }, this), !showCalendarView ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"scheduled-outfits-list\",\n        children: scheduledOutfits.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"no-items-message\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"No outfits scheduled yet.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1274,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1273,\n          columnNumber: 17\n        }, this) : scheduledOutfits.sort((a, b) => new Date(a.date).getTime() - new Date(b.date).getTime()).map(schedule => {\n          console.log('Rendering schedule in list view:', schedule);\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"scheduled-outfit-card\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"scheduled-outfit-date\",\n              children: formatDate(schedule.date)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1283,\n              columnNumber: 25\n            }, this), schedule.outfit ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"scheduled-outfit-details\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"outfit-info\",\n                children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                  children: schedule.outfit.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1289,\n                  columnNumber: 31\n                }, this), schedule.outfit.occasion && /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"outfit-occasion\",\n                  children: schedule.outfit.occasion\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1291,\n                  columnNumber: 33\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1288,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"outfit-preview\",\n                children: getSortedItems(schedule.outfit.items).map(item => /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: item.image_url,\n                  alt: item.name || item.category,\n                  className: \"outfit-item-image\",\n                  style: {\n                    width: '40px',\n                    height: '40px',\n                    objectFit: 'cover',\n                    borderRadius: '4px',\n                    marginRight: '4px'\n                  }\n                }, item.id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1296,\n                  columnNumber: 33\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1294,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1287,\n              columnNumber: 27\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"scheduled-outfit-details\",\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"Outfit details not available\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1308,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1307,\n              columnNumber: 27\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"scheduled-outfit-actions\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleDeleteSchedule(schedule.id),\n                className: \"btn btn-secondary\",\n                style: {\n                  fontSize: \"14px\",\n                  color: \"#fefefd\",\n                  backgroundColor: \"#ef4444\",\n                  padding: \"8px 16px\",\n                  textTransform: \"uppercase\",\n                  fontWeight: \"bold\",\n                  borderRadius: \"5px\",\n                  border: \"none\",\n                  cursor: \"pointer\"\n                },\n                children: \"Remove\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1312,\n                columnNumber: 27\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1311,\n              columnNumber: 25\n            }, this)]\n          }, schedule.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1282,\n            columnNumber: 23\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1271,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"calendar-view\",\n        children: !isGoogleCalendarConnected ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"no-items-message\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Please connect your Google Calendar to view your scheduled outfits in calendar view.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1339,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: connectGoogleCalendar,\n            className: \"btn btn-secondary\",\n            style: {\n              fontSize: \"16px\",\n              color: \"#fefefd\",\n              backgroundColor: \"#d07d6b\",\n              padding: \"10px 20px\",\n              textTransform: \"uppercase\",\n              fontWeight: \"bold\",\n              borderRadius: \"5px\",\n              border: \"none\",\n              cursor: \"pointer\",\n              display: \"inline-block\",\n              textDecoration: \"none\",\n              transition: \"all 0.3s ease-in-out\"\n            },\n            children: \"Connect Google Calendar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1340,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1338,\n          columnNumber: 17\n        }, this) : calendarEvents.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"no-items-message\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"No upcoming events found in your Google Calendar.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1359,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Schedule an outfit from the Outfit Planner tab to see it here.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1360,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1358,\n          columnNumber: 17\n        }, this) : (() => {\n          console.log('Rendering Kanban calendar view with events:', calendarEvents);\n          console.log('Scheduled outfits for calendar view:', scheduledOutfits);\n\n          // Group events by date\n          const groupedEvents = calendarEvents.reduce((acc, event) => {\n            const formattedDate = getFormattedDate(event);\n            if (!formattedDate) {\n              console.warn('Could not format date for event:', event);\n              return acc;\n            }\n            if (!acc[formattedDate]) {\n              acc[formattedDate] = [];\n            }\n            acc[formattedDate].push(event);\n            return acc;\n          }, {});\n\n          // Get the next 5 days starting from today\n          const today = new Date();\n          const nextFiveDays = Array.from({\n            length: 5\n          }, (_, i) => {\n            const date = new Date(today);\n            date.setDate(today.getDate() + i);\n            return date.toLocaleDateString('en-CA'); // Format as YYYY-MM-DD\n          });\n\n          // Sort dates to ensure they're in chronological order\n          const sortedDates = nextFiveDays.sort((a, b) => {\n            try {\n              return new Date(a).getTime() - new Date(b).getTime();\n            } catch (error) {\n              console.error('Error sorting dates:', error);\n              return 0;\n            }\n          });\n          console.log('Grouped events by date:', groupedEvents);\n          console.log('Next five days:', sortedDates);\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"kanban-calendar-view\",\n            children: sortedDates.map(date => {\n              const events = groupedEvents[date] || [];\n              console.log(`Rendering column for date ${date} with ${events.length} events`);\n\n              // Find the outfit scheduled for this date using the specified format\n              const scheduleMatch = scheduledOutfits.find(s => {\n                const eventDate = getFormattedDate(s.outfit);\n                return eventDate && s.date === eventDate;\n              });\n              const outfit = scheduleMatch === null || scheduleMatch === void 0 ? void 0 : scheduleMatch.outfit;\n              console.log(`Outfit for date ${date}:`, outfit);\n\n              // Create a date object for display\n              const displayDate = new Date(date);\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"kanban-day-column\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"kanban-day-header\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                    children: displayDate.toLocaleDateString('en-US', {\n                      weekday: 'short',\n                      month: 'short',\n                      day: 'numeric'\n                    })\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1422,\n                    columnNumber: 29\n                  }, this), weatherData.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"day-weather\",\n                    children: weatherLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"weather-loading\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"spinner\",\n                        style: {\n                          width: '16px',\n                          height: '16px',\n                          marginRight: '4px'\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1433,\n                        columnNumber: 37\n                      }, this), \"Loading...\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1432,\n                      columnNumber: 35\n                    }, this) : weatherError ? /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"weather-error\",\n                      children: /*#__PURE__*/_jsxDEV(\"span\", {\n                        children: \"Weather unavailable\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1438,\n                        columnNumber: 37\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1437,\n                      columnNumber: 35\n                    }, this) : (() => {\n                      const dayWeather = weatherData.find(w => w.date === date);\n                      if (dayWeather) {\n                        return /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"forecast-day\",\n                          style: {\n                            padding: '8px',\n                            backgroundColor: '#2462A2',\n                            color: 'white',\n                            borderRadius: '8px',\n                            textAlign: 'center',\n                            minWidth: '80px',\n                            transition: 'transform 0.2s ease'\n                          },\n                          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                            className: \"forecast-date\",\n                            style: {\n                              fontSize: '0.9rem',\n                              color: 'rgba(255, 255, 255, 0.9)',\n                              margin: '0 0 0.5rem 0',\n                              fontWeight: '500'\n                            },\n                            children: displayDate.toLocaleDateString('en-US', {\n                              weekday: 'short'\n                            })\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1454,\n                            columnNumber: 43\n                          }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n                            src: dayWeather.icon,\n                            alt: dayWeather.condition,\n                            className: \"forecast-icon\",\n                            style: {\n                              width: '36px',\n                              height: '36px',\n                              margin: '0.25rem 0',\n                              filter: 'drop-shadow(0 2px 4px rgba(0,0,0,0.1))',\n                              transition: 'filter 0.3s ease',\n                              objectFit: 'contain',\n                              padding: '2px',\n                              background: 'transparent'\n                            }\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1462,\n                            columnNumber: 43\n                          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                            className: \"forecast-temp\",\n                            style: {\n                              fontSize: '1.1rem',\n                              fontWeight: '600',\n                              color: 'white',\n                              margin: '0'\n                            },\n                            children: [dayWeather.temperature, \"\\xB0\"]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1477,\n                            columnNumber: 43\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1445,\n                          columnNumber: 41\n                        }, this);\n                      }\n                      return null;\n                    })()\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1430,\n                    columnNumber: 31\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1421,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `kanban-outfit-bar ${outfit ? 'has-outfit' : 'no-outfit'}`,\n                  children: outfit ? /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"outfit-bar-content\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"outfit-bar-title\",\n                      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                        children: outfit.name\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1498,\n                        columnNumber: 35\n                      }, this), outfit.occasion && /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"outfit-occasion\",\n                        children: outfit.occasion\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1499,\n                        columnNumber: 55\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1497,\n                      columnNumber: 33\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"outfit-bar-preview\",\n                      children: getSortedItems(outfit.items).map(item => /*#__PURE__*/_jsxDEV(\"img\", {\n                        src: item.image_url,\n                        alt: item.name || item.category,\n                        className: \"outfit-bar-item-image\"\n                      }, item.id, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1503,\n                        columnNumber: 37\n                      }, this))\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1501,\n                      columnNumber: 33\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1496,\n                    columnNumber: 31\n                  }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"no-outfit-message\",\n                    children: /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: \"No outfit scheduled\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1514,\n                      columnNumber: 33\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1513,\n                    columnNumber: 31\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1494,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"kanban-day-events\",\n                  children: events.map(event => {\n                    try {\n                      // Handle both dateTime and date formats\n                      let startTime;\n                      if (event.start.dateTime) {\n                        startTime = new Date(event.start.dateTime);\n                      } else if (event.start.date) {\n                        // For all-day events, use noon as the display time\n                        startTime = new Date(event.start.date + 'T12:00:00');\n                      } else {\n                        console.warn('Event missing start date:', event);\n                        return null;\n                      }\n                      if (isNaN(startTime.getTime())) {\n                        console.warn('Invalid start time for event:', event);\n                        return null;\n                      }\n                      return /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"kanban-event\",\n                        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"event-time\",\n                          children: event.start.dateTime ? startTime.toLocaleTimeString([], {\n                            hour: '2-digit',\n                            minute: '2-digit'\n                          }) : 'All day'\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1542,\n                          columnNumber: 37\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"event-content\",\n                          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                            children: event.summary\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1551,\n                            columnNumber: 39\n                          }, this), event.description && /*#__PURE__*/_jsxDEV(\"p\", {\n                            className: \"event-description\",\n                            children: event.description\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1553,\n                            columnNumber: 41\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1550,\n                          columnNumber: 37\n                        }, this)]\n                      }, event.id, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1541,\n                        columnNumber: 35\n                      }, this);\n                    } catch (error) {\n                      console.error('Error rendering event:', error);\n                      return null;\n                    }\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1520,\n                  columnNumber: 27\n                }, this)]\n              }, date, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1420,\n                columnNumber: 25\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1403,\n            columnNumber: 19\n          }, this);\n        })()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1336,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1223,\n      columnNumber: 9\n    }, this), activeTab === 'planner' && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"outfit-planner-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"outfit-preview-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"section-title\",\n          children: \"Current Outfit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1578,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"outfit-preview-grid\",\n          children: getSortedItems(selectedItems).map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"outfit-preview-item\",\n            onClick: () => handleItemUnselect(item),\n            style: {\n              cursor: 'pointer'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: item.image_url,\n              alt: item.name || item.category,\n              className: \"outfit-preview-image\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1587,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"outfit-preview-details\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                children: item.name || item.category\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1593,\n                columnNumber: 21\n              }, this), item.brand && /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"item-brand\",\n                children: item.brand\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1594,\n                columnNumber: 36\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1592,\n              columnNumber: 19\n            }, this)]\n          }, item.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1581,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1579,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"outfit-actions\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleRandomize,\n            className: \"btn btn-primary\",\n            style: {\n              fontSize: \"16px\",\n              color: \"#fefefd\",\n              backgroundColor: \"#d07d6b\",\n              padding: \"10px 20px\",\n              textTransform: \"uppercase\",\n              fontWeight: \"bold\",\n              borderRadius: \"5px\",\n              border: \"none\",\n              cursor: \"pointer\",\n              display: \"inline-block\",\n              textDecoration: \"none\",\n              transition: \"all 0.3s ease-in-out\"\n            },\n            children: \"Randomize Outfit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1600,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setShowSaveModal(true),\n            disabled: selectedItems.length === 0,\n            className: \"btn btn-primary\",\n            style: {\n              fontSize: \"16px\",\n              color: \"#fefefd\",\n              backgroundColor: \"#d07d6b\",\n              padding: \"10px 20px\",\n              textTransform: \"uppercase\",\n              fontWeight: \"bold\",\n              borderRadius: \"5px\",\n              border: \"none\",\n              cursor: \"pointer\",\n              display: \"inline-block\",\n              textDecoration: \"none\",\n              transition: \"all 0.3s ease-in-out\",\n              opacity: selectedItems.length === 0 ? 0.5 : 1\n            },\n            children: \"Save Outfit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1616,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1599,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1577,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"clothing-selection-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"section-title\",\n          children: \"Select Items\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1642,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"category-filters\",\n          children: /*#__PURE__*/_jsxDEV(\"select\", {\n            value: selectedCategory,\n            onChange: e => setSelectedCategory(e.target.value),\n            className: \"form-select\",\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"All Categories\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1649,\n              columnNumber: 17\n            }, this), categories.map(category => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: category,\n              children: category\n            }, category, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1651,\n              columnNumber: 19\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1644,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1643,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"clothing-selection-grid\",\n          children: clothingItems.filter(item => !selectedCategory || item.category === selectedCategory).map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `clothing-selection-item ${selectedItems.some(i => i.id === item.id) ? 'selected' : ''}`,\n            onClick: () => handleItemSelect(item),\n            style: {\n              cursor: 'pointer'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: item.image_url,\n              alt: item.name || item.category,\n              className: \"clothing-selection-image\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1667,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"clothing-selection-details\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                children: item.name || item.category\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1673,\n                columnNumber: 23\n              }, this), item.brand && /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"item-brand\",\n                children: item.brand\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1674,\n                columnNumber: 38\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1672,\n              columnNumber: 21\n            }, this)]\n          }, item.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1659,\n            columnNumber: 19\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1655,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1641,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"saved-outfits-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"section-title\",\n          children: \"Saved Outfits\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1682,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"saved-outfits-grid\",\n          children: savedOutfits.map(outfit => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"saved-outfit-card\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: outfit.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1686,\n              columnNumber: 19\n            }, this), outfit.occasion ? /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"outfit-occasion\",\n              children: outfit.occasion\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1688,\n              columnNumber: 21\n            }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"outfit-occasion\",\n              style: {\n                visibility: \"hidden\"\n              },\n              children: \"No occasion\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1690,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"saved-outfit-preview\",\n              children: getSortedItems(outfit.items).map(item => /*#__PURE__*/_jsxDEV(\"img\", {\n                src: item.image_url,\n                alt: item.name || item.category,\n                className: \"saved-outfit-item-image\"\n              }, item.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1694,\n                columnNumber: 23\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1692,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"saved-outfit-actions\",\n              style: {\n                display: \"flex\",\n                flexDirection: \"column\",\n                gap: \"10px\",\n                width: \"100%\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => {\n                  setSelectedItems(outfit.items);\n                  window.scrollTo({\n                    top: 0,\n                    behavior: 'smooth'\n                  });\n                },\n                className: \"btn btn-secondary\",\n                style: {\n                  fontSize: \"16px\",\n                  color: \"#fefefd\",\n                  backgroundColor: \"#d07d6b\",\n                  padding: \"10px 20px\",\n                  textTransform: \"uppercase\",\n                  fontWeight: \"bold\",\n                  borderRadius: \"5px\",\n                  border: \"none\",\n                  cursor: \"pointer\",\n                  display: \"inline-block\",\n                  textDecoration: \"none\",\n                  transition: \"all 0.3s ease-in-out\",\n                  width: \"100%\"\n                },\n                children: \"Load\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1708,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => {\n                  setSelectedOutfitForSchedule(outfit);\n                  setShowScheduleModal(true);\n                },\n                className: \"btn btn-secondary\",\n                style: {\n                  fontSize: \"16px\",\n                  color: \"#fefefd\",\n                  backgroundColor: \"#d07d6b\",\n                  padding: \"10px 20px\",\n                  textTransform: \"uppercase\",\n                  fontWeight: \"bold\",\n                  borderRadius: \"5px\",\n                  border: \"none\",\n                  cursor: \"pointer\",\n                  display: \"inline-block\",\n                  textDecoration: \"none\",\n                  transition: \"all 0.3s ease-in-out\",\n                  width: \"100%\"\n                },\n                children: \"Schedule\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1732,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleDeleteOutfit(outfit.id),\n                className: \"btn btn-danger\",\n                style: {\n                  fontSize: \"16px\",\n                  color: \"#fefefd\",\n                  backgroundColor: \"#ef4444\",\n                  padding: \"10px 20px\",\n                  textTransform: \"uppercase\",\n                  fontWeight: \"bold\",\n                  borderRadius: \"5px\",\n                  border: \"none\",\n                  cursor: \"pointer\",\n                  display: \"inline-block\",\n                  textDecoration: \"none\",\n                  transition: \"all 0.3s ease-in-out\",\n                  width: \"100%\"\n                },\n                children: \"Delete\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1756,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1702,\n              columnNumber: 19\n            }, this)]\n          }, outfit.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1685,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1683,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1681,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1576,\n      columnNumber: 9\n    }, this), showSaveModal && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-overlay\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"section-title\",\n          children: \"Save Outfit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1789,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Outfit Name:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1791,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: outfitName,\n            onChange: e => setOutfitName(e.target.value),\n            placeholder: \"Enter a name for your outfit\",\n            className: \"form-input\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1792,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1790,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Occasion (optional):\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1801,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: outfitOccasion,\n            onChange: e => setOutfitOccasion(e.target.value),\n            placeholder: \"Enter an occasion\",\n            className: \"form-input\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1802,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1800,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-actions\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              setShowSaveModal(false);\n              setOutfitName('');\n              setOutfitOccasion('');\n            },\n            className: \"btn btn-secondary\",\n            style: {\n              fontSize: \"16px\",\n              color: \"#fefefd\",\n              backgroundColor: \"#d07d6b\",\n              padding: \"10px 20px\",\n              textTransform: \"uppercase\",\n              fontWeight: \"bold\",\n              borderRadius: \"5px\",\n              border: \"none\",\n              cursor: \"pointer\",\n              display: \"inline-block\",\n              textDecoration: \"none\",\n              transition: \"all 0.3s ease-in-out\"\n            },\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1811,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleSaveOutfit,\n            disabled: !outfitName,\n            className: \"btn btn-primary\",\n            style: {\n              fontSize: \"16px\",\n              color: \"#fefefd\",\n              backgroundColor: \"#d07d6b\",\n              padding: \"10px 20px\",\n              textTransform: \"uppercase\",\n              fontWeight: \"bold\",\n              borderRadius: \"5px\",\n              border: \"none\",\n              cursor: \"pointer\",\n              display: \"inline-block\",\n              textDecoration: \"none\",\n              transition: \"all 0.3s ease-in-out\",\n              opacity: !outfitName ? 0.5 : 1\n            },\n            children: \"Save\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1835,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1810,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1788,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1787,\n      columnNumber: 9\n    }, this), showScheduleModal && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-overlay\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"section-title\",\n          children: \"Schedule Outfit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1866,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Select Date:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1868,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"date\",\n            value: scheduleDate,\n            onChange: e => setScheduleDate(e.target.value),\n            className: \"form-input\",\n            min: new Date().toISOString().split('T')[0]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1869,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1867,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"scheduled-outfit-preview\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: selectedOutfitForSchedule === null || selectedOutfitForSchedule === void 0 ? void 0 : selectedOutfitForSchedule.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1878,\n            columnNumber: 15\n          }, this), (selectedOutfitForSchedule === null || selectedOutfitForSchedule === void 0 ? void 0 : selectedOutfitForSchedule.occasion) && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"outfit-occasion\",\n            children: selectedOutfitForSchedule.occasion\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1880,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"outfit-preview-grid\",\n            children: (selectedOutfitForSchedule === null || selectedOutfitForSchedule === void 0 ? void 0 : selectedOutfitForSchedule.items) && getSortedItems(selectedOutfitForSchedule.items).map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"outfit-preview-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: item.image_url,\n                alt: item.name || item.category,\n                className: \"outfit-preview-image\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1885,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"outfit-preview-details\",\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  children: item.name || item.category\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1891,\n                  columnNumber: 23\n                }, this), item.brand && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"item-brand\",\n                  children: item.brand\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1892,\n                  columnNumber: 38\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1890,\n                columnNumber: 21\n              }, this)]\n            }, item.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1884,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1882,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1877,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-actions\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              setShowScheduleModal(false);\n              setSelectedOutfitForSchedule(null);\n              setScheduleDate('');\n            },\n            className: \"btn btn-secondary\",\n            style: {\n              fontSize: \"16px\",\n              color: \"#fefefd\",\n              backgroundColor: \"#d07d6b\",\n              padding: \"10px 20px\",\n              textTransform: \"uppercase\",\n              fontWeight: \"bold\",\n              borderRadius: \"5px\",\n              border: \"none\",\n              cursor: \"pointer\",\n              display: \"inline-block\",\n              textDecoration: \"none\",\n              transition: \"all 0.3s ease-in-out\"\n            },\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1899,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleScheduleOutfit,\n            disabled: !scheduleDate,\n            className: \"btn btn-primary\",\n            style: {\n              fontSize: \"16px\",\n              color: \"#fefefd\",\n              backgroundColor: \"#d07d6b\",\n              padding: \"10px 20px\",\n              textTransform: \"uppercase\",\n              fontWeight: \"bold\",\n              borderRadius: \"5px\",\n              border: \"none\",\n              cursor: \"pointer\",\n              display: \"inline-block\",\n              textDecoration: \"none\",\n              transition: \"all 0.3s ease-in-out\",\n              opacity: !scheduleDate ? 0.5 : 1\n            },\n            children: \"Schedule\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1923,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1898,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1865,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1864,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1154,\n    columnNumber: 5\n  }, this);\n};\n_s(OutfitPlanner, \"N9YYCoc0Vq/gCpO7jzt9bdhDm/0=\", false, function () {\n  return [useNavigate];\n});\n_c = OutfitPlanner;\nexport default OutfitPlanner;\nvar _c;\n$RefreshReg$(_c, \"OutfitPlanner\");","map":{"version":3,"names":["React","useState","useEffect","supabase","useNavigate","jsxDEV","_jsxDEV","getFormattedDate","event","start","date","Date","toLocaleDateString","dateTime","error","console","OutfitPlanner","_s","navigate","clothingItems","setClothingItems","selectedItems","setSelectedItems","savedOutfits","setSavedOutfits","showSaveModal","setShowSaveModal","outfitName","setOutfitName","outfitOccasion","setOutfitOccasion","selectedCategory","setSelectedCategory","scheduledOutfits","setScheduledOutfits","showScheduleModal","setShowScheduleModal","selectedOutfitForSchedule","setSelectedOutfitForSchedule","scheduleDate","setScheduleDate","isGoogleCalendarConnected","setIsGoogleCalendarConnected","activeTab","setActiveTab","calendarEvents","setCalendarEvents","showCalendarView","setShowCalendarView","weatherData","setWeatherData","weatherLoading","setWeatherLoading","weatherError","setWeatherError","categories","categoryOrder","fetchClothingItems","fetchSavedOutfits","checkOutfitSchedulesTable","fetchScheduledOutfits","ensureUserSettingsTable","checkGoogleCalendarConnection","length","fetchWeatherData","data","user","auth","getUser","Error","from","select","eq","id","order","ascending","outfitsWithItems","Promise","all","map","outfit","items","in","log","tableCheckError","limit","schedules","schedulesError","outfitIds","schedule","outfit_id","outfits","outfitsError","outfitItemsMap","Map","itemsError","set","schedulesWithOutfits","find","o","get","code","createOutfitSchedulesTable","alert","handleRandomize","newSelectedItems","usedCategories","Set","shuffledItems","sort","Math","random","item","has","category","push","add","handleItemSelect","isAlreadySelected","some","i","filter","filteredItems","handleItemUnselect","handleSaveOutfit","user_id","name","occasion","insert","message","handleDeleteOutfit","outfitId","window","confirm","delete","settings","settingsError","single","google_token_expiry","google_access_token","google_calendar_connected","fetchCalendarEvents","connectGoogleCalendar","gapi","resolve","reject","script","document","createElement","src","onload","onerror","body","appendChild","load","client","init","apiKey","process","env","REACT_APP_GOOGLE_API_KEY","discoveryDocs","tokenClient","google","accounts","oauth2","initTokenClient","client_id","REACT_APP_GOOGLE_CLIENT_ID","scope","callback","response","existingSettings","checkError","createError","access_token","now","expires_in","toISOString","updateData","updateError","update","details","hint","includes","retryError","error_callback","requestAccessToken","tokenExpiry","setToken","thirtyDaysFromNow","setDate","getDate","timeMin","timeMax","calendar","events","list","result","updatedSchedules","forEach","description","outfitIdMatch","match","existingScheduleIndex","findIndex","split","eventDate","created_at","google_event_id","handleScheduleOutfit","formattedDate","scheduleData","scheduleError","selectedDate","setHours","Intl","DateTimeFormat","resolvedOptions","timeZone","getTime","handleDeleteSchedule","scheduleId","getSortedItems","a","b","indexA","indexOf","indexB","formatDate","dateString","weekday","year","month","day","google_refresh_token","needsUpdate","REACT_APP_OPENWEATHER_API_KEY","city","forecastResponse","fetch","ok","forecastData","json","dailyForecasts","index","iconPath","condition","weather","main","toLowerCase","hour","dt","getHours","temperature","round","temp","icon","slice","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","style","fontSize","color","backgroundColor","padding","textTransform","fontWeight","borderRadius","border","cursor","display","textDecoration","transition","borderBottom","image_url","alt","width","height","objectFit","marginRight","groupedEvents","reduce","acc","warn","today","nextFiveDays","Array","_","sortedDates","scheduleMatch","s","displayDate","dayWeather","w","textAlign","minWidth","margin","background","startTime","isNaN","toLocaleTimeString","minute","summary","brand","disabled","opacity","value","onChange","e","target","visibility","flexDirection","gap","scrollTo","top","behavior","type","placeholder","min","_c","$RefreshReg$"],"sources":["/Users/adlyazim/Documents/GitHub/ENTI674-Team3-FinalProject/client/src/pages/OutfitPlanner.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { supabase } from '../utils/supabaseClient';\nimport { useNavigate } from 'react-router-dom';\nimport '../styles/main.css';\n\ninterface ClothingItem {\n  id: string;\n  image_url: string;\n  name: string | null;\n  brand: string | null;\n  category: string;\n  color: string;\n  occasion: string;\n}\n\ninterface Outfit {\n  id: string;\n  name: string;\n  occasion: string | null;\n  items: ClothingItem[];\n  created_at: string;\n}\n\ninterface OutfitSchedule {\n  id: string;\n  outfit_id: string;\n  date: string;\n  user_id: string;\n  created_at: string;\n  outfit?: Outfit;\n  google_event_id?: string;\n}\n\ninterface GoogleCalendarEvent {\n  id: string;\n  summary: string;\n  description?: string;\n  start: {\n    dateTime?: string;\n    date?: string;\n    timeZone?: string;\n  };\n  end: {\n    dateTime?: string;\n    date?: string;\n    timeZone?: string;\n  };\n}\n\ninterface WeatherData {\n  date: string;\n  temperature: number;\n  condition: string;\n  icon: string;\n}\n\n// Utility function for safe date handling\nconst getFormattedDate = (event: GoogleCalendarEvent): string | null => {\n  try {\n    if (!event.start) return null;\n    \n    // For all-day events\n    if (event.start.date) {\n      return new Date(event.start.date).toLocaleDateString('en-CA');\n    }\n    \n    // For events with specific times\n    if (event.start.dateTime) {\n      return new Date(event.start.dateTime).toLocaleDateString('en-CA');\n    }\n    \n    return null;\n  } catch (error) {\n    console.error('Error formatting date:', error);\n    return null;\n  }\n};\n\nconst OutfitPlanner: React.FC = () => {\n  const navigate = useNavigate();\n  const [clothingItems, setClothingItems] = useState<ClothingItem[]>([]);\n  const [selectedItems, setSelectedItems] = useState<ClothingItem[]>([]);\n  const [savedOutfits, setSavedOutfits] = useState<Outfit[]>([]);\n  const [showSaveModal, setShowSaveModal] = useState(false);\n  const [outfitName, setOutfitName] = useState('');\n  const [outfitOccasion, setOutfitOccasion] = useState('');\n  const [selectedCategory, setSelectedCategory] = useState<string>('');\n  const [scheduledOutfits, setScheduledOutfits] = useState<OutfitSchedule[]>([]);\n  const [showScheduleModal, setShowScheduleModal] = useState(false);\n  const [selectedOutfitForSchedule, setSelectedOutfitForSchedule] = useState<Outfit | null>(null);\n  const [scheduleDate, setScheduleDate] = useState('');\n  const [isGoogleCalendarConnected, setIsGoogleCalendarConnected] = useState(false);\n  const [activeTab, setActiveTab] = useState<'planner' | 'calendar'>('planner');\n  const [calendarEvents, setCalendarEvents] = useState<GoogleCalendarEvent[]>([]);\n  const [showCalendarView, setShowCalendarView] = useState(true);\n  const [weatherData, setWeatherData] = useState<WeatherData[]>([]);\n  const [weatherLoading, setWeatherLoading] = useState(false);\n  const [weatherError, setWeatherError] = useState<string | null>(null);\n\n  const categories = [\n    'Jacket',\n    'Shirt',\n    'T-Shirt',\n    'Sweater',\n    'Dress',\n    'Skirt',\n    'Pants',\n    'Shorts',\n    'Jeans',\n    'Shoes',\n    'Accessories',\n  ];\n\n  const categoryOrder = [\n    'Headwear',\n    'Jacket',\n    'Shirt',\n    'T-Shirt',\n    'Sweater',\n    'Dress',\n    'Skirt',\n    'Pants',\n    'Shorts',\n    'Jeans',\n    'Shoes',\n    'Accessories'\n  ];\n\n  useEffect(() => {\n    fetchClothingItems();\n    fetchSavedOutfits();\n    checkOutfitSchedulesTable();\n    fetchScheduledOutfits();\n    ensureUserSettingsTable();\n    checkGoogleCalendarConnection();\n  }, []);\n\n  useEffect(() => {\n    if (showCalendarView && calendarEvents.length > 0) {\n      fetchWeatherData();\n    }\n  }, [showCalendarView, calendarEvents]);\n\n  const fetchClothingItems = async () => {\n    try {\n      // Get the current user's ID\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) {\n        throw new Error('No authenticated user found');\n      }\n\n      const { data, error } = await supabase\n        .from('clothing_items')\n        .select('*')\n        .eq('user_id', user.id);\n\n      if (error) throw error;\n      if (data) setClothingItems(data);\n    } catch (error) {\n      console.error('Error fetching clothing items:', error);\n    }\n  };\n\n  const fetchSavedOutfits = async () => {\n    try {\n      // Get the current user's ID\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) {\n        throw new Error('No authenticated user found');\n      }\n\n      const { data, error } = await supabase\n        .from('outfits')\n        .select('*')\n        .eq('user_id', user.id)\n        .order('created_at', { ascending: false });\n\n      if (error) throw error;\n      if (data) {\n        // Fetch the actual clothing items for each outfit\n        const outfitsWithItems = await Promise.all(\n          data.map(async (outfit) => {\n            const { data: items } = await supabase\n              .from('clothing_items')\n              .select('*')\n              .in('id', outfit.items);\n            return {\n              ...outfit,\n              items: items || [],\n            };\n          })\n        );\n        setSavedOutfits(outfitsWithItems);\n      }\n    } catch (error) {\n      console.error('Error fetching saved outfits:', error);\n    }\n  };\n\n  const fetchScheduledOutfits = async () => {\n    try {\n      console.log('Fetching scheduled outfits...');\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) {\n        console.log('No authenticated user found');\n        return;\n      }\n      console.log('Authenticated user:', user.id);\n\n      // First check if the outfit_schedules table exists\n      const { error: tableCheckError } = await supabase\n        .from('outfit_schedules')\n        .select('id')\n        .limit(1);\n      \n      if (tableCheckError) {\n        console.log('Outfit schedules table may not exist yet:', tableCheckError);\n        return;\n      }\n      console.log('Outfit schedules table exists');\n\n      // Fetch scheduled outfits with outfit details\n      const { data: schedules, error: schedulesError } = await supabase\n        .from('outfit_schedules')\n        .select('*')\n        .eq('user_id', user.id)\n        .order('date', { ascending: true });\n\n      if (schedulesError) {\n        console.error('Error fetching scheduled outfits:', schedulesError);\n        return;\n      }\n\n      console.log('Fetched scheduled outfits:', schedules);\n\n      if (schedules && schedules.length > 0) {\n        // Fetch outfit details for each schedule\n        const outfitIds = schedules.map(schedule => schedule.outfit_id);\n        console.log('Fetching outfit details for IDs:', outfitIds);\n        \n        const { data: outfits, error: outfitsError } = await supabase\n          .from('outfits')\n          .select('*')\n          .in('id', outfitIds);\n\n        if (outfitsError) {\n          console.error('Error fetching outfit details:', outfitsError);\n          return;\n        }\n\n        console.log('Fetched outfit details:', outfits);\n\n        // Fetch clothing items for each outfit\n        const outfitItemsMap = new Map();\n        for (const outfit of outfits) {\n          console.log(`Fetching items for outfit ${outfit.id}:`, outfit.items);\n          const { data: items, error: itemsError } = await supabase\n            .from('clothing_items')\n            .select('*')\n            .in('id', outfit.items);\n\n          if (itemsError) {\n            console.error(`Error fetching items for outfit ${outfit.id}:`, itemsError);\n            continue;\n          }\n\n          outfitItemsMap.set(outfit.id, items);\n          console.log(`Items for outfit ${outfit.id}:`, items);\n        }\n\n        // Combine schedules with outfit details and items\n        const schedulesWithOutfits = schedules.map(schedule => {\n          const outfit = outfits.find(o => o.id === schedule.outfit_id);\n          if (outfit) {\n            const items = outfitItemsMap.get(outfit.id) || [];\n            return {\n              ...schedule,\n              outfit: {\n                ...outfit,\n                items\n              }\n            };\n          }\n          return schedule;\n        });\n\n        console.log('Combined schedules with outfits:', schedulesWithOutfits);\n        setScheduledOutfits(schedulesWithOutfits);\n      } else {\n        console.log('No scheduled outfits found');\n        setScheduledOutfits([]);\n      }\n    } catch (error) {\n      console.error('Error in fetchScheduledOutfits:', error);\n    }\n  };\n\n  const checkOutfitSchedulesTable = async () => {\n    try {\n      // Try to query the table to see if it exists\n      const { error } = await supabase\n        .from('outfit_schedules')\n        .select('id')\n        .limit(1);\n      \n      if (error) {\n        console.error('Error checking outfit_schedules table:', error);\n        \n        // If the error indicates the table doesn't exist, create it\n        if (error.code === '42P01') { // PostgreSQL error code for undefined_table\n          console.log('Creating outfit_schedules table...');\n          await createOutfitSchedulesTable();\n        }\n      } else {\n        console.log('outfit_schedules table exists');\n      }\n    } catch (error) {\n      console.error('Error in checkOutfitSchedulesTable:', error);\n    }\n  };\n\n  const createOutfitSchedulesTable = async () => {\n    try {\n      // This is a simplified approach - in a real app, you'd use migrations\n      // or have the table created by your backend\n      console.log('This feature requires the outfit_schedules table to be created in Supabase.');\n      console.log('Please run the SQL in the outfit_schedules.sql file in your Supabase SQL editor.');\n      \n      // Show a more user-friendly message\n      alert('The outfit scheduling feature requires database setup. Please contact the administrator.');\n    } catch (error) {\n      console.error('Error creating outfit_schedules table:', error);\n    }\n  };\n\n  const handleRandomize = () => {\n    const newSelectedItems: ClothingItem[] = [];\n    const usedCategories = new Set<string>();\n\n    // Shuffle the clothing items\n    const shuffledItems = [...clothingItems].sort(() => Math.random() - 0.5);\n\n    // Select one item from each category\n    for (const item of shuffledItems) {\n      if (!usedCategories.has(item.category)) {\n        newSelectedItems.push(item);\n        usedCategories.add(item.category);\n      }\n    }\n\n    setSelectedItems(newSelectedItems);\n  };\n\n  const handleItemSelect = (item: ClothingItem) => {\n    // Check if the item is already selected\n    const isAlreadySelected = selectedItems.some(i => i.id === item.id);\n    \n    if (isAlreadySelected) {\n      // If already selected, remove it\n      setSelectedItems(selectedItems.filter(i => i.id !== item.id));\n    } else {\n      // If not selected, remove any existing item of the same category and add this one\n      const filteredItems = selectedItems.filter(i => i.category !== item.category);\n      setSelectedItems([...filteredItems, item]);\n    }\n  };\n\n  const handleItemUnselect = (item: ClothingItem) => {\n    // Remove the item from selected items\n    setSelectedItems(selectedItems.filter(i => i.id !== item.id));\n  };\n\n  const handleSaveOutfit = async () => {\n    if (!outfitName || selectedItems.length === 0) {\n      alert('Please provide a name for the outfit and select at least one item');\n      return;\n    }\n\n    try {\n      // Get the current user's ID\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) {\n        throw new Error('No authenticated user found');\n      }\n\n      console.log('Saving outfit with data:', {\n        user_id: user.id,\n        name: outfitName,\n        occasion: outfitOccasion || null,\n        items: selectedItems.map(item => item.id)\n      });\n\n      const { data, error } = await supabase\n        .from('outfits')\n        .insert([\n          {\n            user_id: user.id,\n            name: outfitName,\n            occasion: outfitOccasion || null,\n            items: selectedItems.map(item => item.id),\n          },\n        ])\n        .select();\n\n      if (error) {\n        console.error('Supabase error details:', error);\n        throw error;\n      }\n\n      console.log('Successfully saved outfit:', data);\n\n      setShowSaveModal(false);\n      setOutfitName('');\n      setOutfitOccasion('');\n      fetchSavedOutfits();\n    } catch (error) {\n      console.error('Error saving outfit:', error);\n      if (error instanceof Error) {\n        alert(`Error saving outfit: ${error.message}`);\n      } else {\n        alert('Error saving outfit. Please check the console for details.');\n      }\n    }\n  };\n\n  const handleDeleteOutfit = async (outfitId: string) => {\n    if (window.confirm('Are you sure you want to delete this outfit?')) {\n      try {\n        const { error } = await supabase\n          .from('outfits')\n          .delete()\n          .eq('id', outfitId);\n\n        if (error) throw error;\n        fetchSavedOutfits();\n      } catch (error) {\n        console.error('Error deleting outfit:', error);\n        alert('Error deleting outfit');\n      }\n    }\n  };\n\n  const checkGoogleCalendarConnection = async () => {\n    try {\n      console.log('Checking Google Calendar connection...');\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) {\n        console.log('No authenticated user found');\n        return;\n      }\n\n      // Check if user has Google Calendar connected\n      const { data: settings, error: settingsError } = await supabase\n        .from('user_settings')\n        .select('google_calendar_connected, google_access_token, google_token_expiry')\n        .eq('user_id', user.id)\n        .single();\n\n      if (settingsError) {\n        console.error('Error checking user settings:', settingsError);\n        return;\n      }\n\n      console.log('User settings for Google Calendar:', settings);\n\n      // Check if the token is expired\n      if (settings?.google_token_expiry && new Date(settings.google_token_expiry) < new Date()) {\n        console.log('Google token is expired');\n        setIsGoogleCalendarConnected(false);\n        return;\n      }\n\n      // Check if we have a valid access token\n      if (!settings?.google_access_token) {\n        console.log('No Google access token found');\n        setIsGoogleCalendarConnected(false);\n        return;\n      }\n\n      // If we have a valid token and the connection is marked as connected, we're good\n      if (settings.google_calendar_connected) {\n        console.log('Google Calendar is connected');\n        setIsGoogleCalendarConnected(true);\n        \n        // Fetch calendar events to make sure the connection is working\n        await fetchCalendarEvents();\n      } else {\n        console.log('Google Calendar is not connected');\n        setIsGoogleCalendarConnected(false);\n      }\n    } catch (error) {\n      console.error('Error checking Google Calendar connection:', error);\n      setIsGoogleCalendarConnected(false);\n    }\n  };\n\n  const connectGoogleCalendar = async () => {\n    try {\n      console.log('Starting Google Calendar connection...');\n      \n      // Check if user is authenticated\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) {\n        throw new Error('No authenticated user found');\n      }\n      \n      // Load the Google API client\n      if (typeof window.gapi === 'undefined') {\n        console.log('Loading Google API script...');\n        await new Promise((resolve, reject) => {\n          const script = document.createElement('script');\n          script.src = 'https://apis.google.com/js/api.js';\n          script.onload = resolve;\n          script.onerror = reject;\n          document.body.appendChild(script);\n        });\n      }\n      \n      // Initialize the Google API client\n      console.log('Initializing Google API client...');\n      try {\n        await new Promise<void>((resolve, reject) => {\n          (window.gapi as any).load('client', async () => {\n            try {\n              await (window.gapi as any).client.init({\n                apiKey: process.env.REACT_APP_GOOGLE_API_KEY,\n                discoveryDocs: ['https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest']\n              });\n              console.log('Google API client initialized successfully');\n              resolve();\n            } catch (error) {\n              console.error('Error initializing Google API client:', error);\n              reject(error);\n            }\n          });\n        });\n      } catch (error) {\n        console.error('Error loading Google API client:', error);\n        throw new Error('Failed to initialize Google API client. Please check your API credentials.');\n      }\n      \n      // Use the new Google Identity Services for authentication\n      console.log('Signing in with Google...');\n      try {\n        // Create a token client\n        const tokenClient = (window.google as any).accounts.oauth2.initTokenClient({\n          client_id: process.env.REACT_APP_GOOGLE_CLIENT_ID,\n          scope: 'https://www.googleapis.com/auth/calendar',\n          callback: async (response: any) => {\n            if (response.error) {\n              console.error('Error getting token:', response.error);\n              throw new Error('Failed to get Google token');\n            }\n            \n            console.log('Got Google token:', response);\n            \n            // Save the access token to user settings\n            console.log('Saving access token to user settings...');\n            try {\n              // First check if the user settings record exists\n              const { data: existingSettings, error: checkError } = await supabase\n                .from('user_settings')\n                .select('*')\n                .eq('user_id', user.id)\n                .single();\n              \n              if (checkError && checkError.code !== 'PGRST116') { // PGRST116 is \"not found\" error\n                console.error('Error checking user settings:', checkError);\n                throw checkError;\n              }\n              \n              // If the record doesn't exist, create it\n              if (!existingSettings) {\n                console.log('Creating new user settings record...');\n                const { error: createError } = await supabase\n                  .from('user_settings')\n                  .insert({\n                    user_id: user.id,\n                    google_calendar_connected: true,\n                    google_access_token: response.access_token,\n                    google_token_expiry: new Date(Date.now() + response.expires_in * 1000).toISOString()\n                  });\n                \n                if (createError) {\n                  console.error('Error creating user settings:', createError);\n                  throw createError;\n                }\n              } else {\n                // Update the existing record\n                console.log('Updating existing user settings record...');\n                try {\n                  const { data: updateData, error: updateError } = await supabase\n                    .from('user_settings')\n                    .update({\n                      google_calendar_connected: true,\n                      google_access_token: response.access_token,\n                      google_token_expiry: new Date(Date.now() + response.expires_in * 1000).toISOString()\n                    })\n                    .eq('user_id', user.id)\n                    .select();\n                  \n                  if (updateError) {\n                    console.error('Error updating user settings:', updateError);\n                    console.error('Error details:', {\n                      code: updateError.code,\n                      message: updateError.message,\n                      details: updateError.details,\n                      hint: updateError.hint\n                    });\n                    \n                    // If the error is about the column not existing, try to update without that field\n                    if (updateError.message && updateError.message.includes('google_token_expiry')) {\n                      console.log('Trying to update without the google_token_expiry field...');\n                      const { error: retryError } = await supabase\n                        .from('user_settings')\n                        .update({\n                          google_calendar_connected: true,\n                          google_access_token: response.access_token\n                        })\n                        .eq('user_id', user.id);\n                      \n                      if (retryError) {\n                        console.error('Error updating user settings without expiry:', retryError);\n                        throw retryError;\n                      }\n                      \n                      console.log('Successfully updated user settings without expiry field');\n                    } else {\n                      throw updateError;\n                    }\n                  } else {\n                    console.log('Update successful:', updateData);\n                  }\n                } catch (error) {\n                  console.error('Error saving Google tokens:', error);\n                  alert('Failed to save Google Calendar connection. Please try again.');\n                  return;\n                }\n              }\n              \n              console.log('Google Calendar connected successfully');\n              setIsGoogleCalendarConnected(true);\n              \n              // Fetch calendar events\n              await fetchCalendarEvents();\n            } catch (error) {\n              console.error('Error saving Google tokens:', error);\n              alert('Failed to save Google Calendar connection. Please try again.');\n            }\n          },\n          error_callback: (error: any) => {\n            console.error('Error in token client:', error);\n            alert('Failed to authenticate with Google. Please try again.');\n          }\n        });\n        \n        // Request a token\n        tokenClient.requestAccessToken();\n      } catch (error) {\n        console.error('Error signing in with Google:', error);\n        alert('Failed to sign in with Google. Please try again.');\n      }\n    } catch (error) {\n      console.error('Error connecting to Google Calendar:', error);\n      alert('Failed to connect to Google Calendar. Please try again.');\n    }\n  };\n\n  const fetchCalendarEvents = async () => {\n    try {\n      console.log('Fetching calendar events...');\n      \n      // Check if user is authenticated\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) {\n        throw new Error('No authenticated user found');\n      }\n      \n      // Get user settings\n      const { data: settings, error: settingsError } = await supabase\n        .from('user_settings')\n        .select('*')\n        .eq('user_id', user.id)\n        .single();\n      \n      if (settingsError) {\n        console.error('Error fetching user settings:', settingsError);\n        throw settingsError;\n      }\n      \n      if (!settings?.google_access_token) {\n        console.log('No Google access token found');\n        setIsGoogleCalendarConnected(false);\n        return;\n      }\n      \n      // Check if token is expired\n      const tokenExpiry = new Date(settings.google_token_expiry);\n      if (tokenExpiry < new Date()) {\n        console.log('Google token expired, requesting new token...');\n        setIsGoogleCalendarConnected(false);\n        await connectGoogleCalendar();\n        return;\n      }\n      \n      // Ensure Google API client is loaded\n      if (typeof window.gapi === 'undefined') {\n        console.log('Loading Google API script...');\n        await new Promise((resolve, reject) => {\n          const script = document.createElement('script');\n          script.src = 'https://apis.google.com/js/api.js';\n          script.onload = resolve;\n          script.onerror = reject;\n          document.body.appendChild(script);\n        });\n      }\n      \n      // Initialize the Google API client\n      console.log('Initializing Google API client...');\n      try {\n        await new Promise<void>((resolve, reject) => {\n          (window.gapi as any).load('client', async () => {\n            try {\n              await (window.gapi as any).client.init({\n                apiKey: process.env.REACT_APP_GOOGLE_API_KEY,\n                discoveryDocs: ['https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest']\n              });\n              console.log('Google API client initialized successfully');\n              resolve();\n            } catch (error) {\n              console.error('Error initializing Google API client:', error);\n              reject(error);\n            }\n          });\n        });\n      } catch (error) {\n        console.error('Error loading Google API client:', error);\n        throw new Error('Failed to initialize Google API client');\n      }\n      \n      // Set the access token\n      console.log('Setting Google API token...');\n      try {\n        (window.gapi as any).client.setToken({\n          access_token: settings.google_access_token\n        });\n      } catch (error) {\n        console.error('Error setting Google API token:', error);\n        throw new Error('Failed to set Google API token');\n      }\n      \n      // Get the current date and date 30 days from now\n      const now = new Date();\n      const thirtyDaysFromNow = new Date();\n      thirtyDaysFromNow.setDate(now.getDate() + 30);\n      \n      // Format dates for the API\n      const timeMin = now.toISOString();\n      const timeMax = thirtyDaysFromNow.toISOString();\n      \n      // Fetch events from Google Calendar\n      console.log('Fetching events from Google Calendar...');\n      try {\n        const response = await (window.gapi as any).client.calendar.events.list({\n          'calendarId': 'primary',\n          'timeMin': timeMin,\n          'timeMax': timeMax,\n          'showDeleted': false,\n          'singleEvents': true,\n          'orderBy': 'startTime'\n        });\n        \n        console.log('Google Calendar API response:', response);\n        \n        if (response.result.items) {\n          const events = response.result.items;\n          console.log('Fetched calendar events:', events);\n          \n          // Update scheduled outfits based on event descriptions\n          const updatedSchedules = [...scheduledOutfits];\n          events.forEach((event: GoogleCalendarEvent) => {\n            if (event.description) {\n              const outfitIdMatch = event.description.match(/Outfit ID: (\\d+)/);\n              if (outfitIdMatch) {\n                const outfitId = outfitIdMatch[1];\n                const existingScheduleIndex = updatedSchedules.findIndex(\n                  schedule => schedule.outfit_id === outfitId && \n                  new Date(schedule.date).toISOString().split('T')[0] === \n                  new Date(event.start.dateTime).toISOString().split('T')[0]\n                );\n                \n                if (existingScheduleIndex === -1) {\n                  const eventDate = getFormattedDate(event);\n                  if (eventDate) {\n                    updatedSchedules.push({\n                      id: `temp-${Date.now()}`,\n                      outfit_id: outfitId,\n                      date: eventDate,\n                      user_id: user.id,\n                      created_at: new Date().toISOString(),\n                      google_event_id: event.id\n                    });\n                  }\n                }\n              }\n            }\n          });\n          \n          setScheduledOutfits(updatedSchedules);\n          setCalendarEvents(events);\n          setIsGoogleCalendarConnected(true);\n        } else {\n          console.log('No events found in the specified time range');\n          setCalendarEvents([]);\n        }\n      } catch (error) {\n        console.error('Error fetching calendar events:', error);\n        throw new Error('Failed to fetch calendar events');\n      }\n    } catch (error) {\n      console.error('Error in fetchCalendarEvents:', error);\n      setIsGoogleCalendarConnected(false);\n      setCalendarEvents([]);\n    }\n  };\n\n  const handleScheduleOutfit = async () => {\n    if (!selectedOutfitForSchedule || !scheduleDate) {\n      alert('Please select an outfit and a date');\n      return;\n    }\n\n    try {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) {\n        throw new Error('No authenticated user found');\n      }\n      console.log('Scheduling outfit for user:', user.id);\n\n      // Format the date to ensure consistency\n      const formattedDate = new Date(scheduleDate).toLocaleDateString('en-CA');\n      console.log('Scheduling outfit for date:', formattedDate);\n      console.log('Selected outfit:', selectedOutfitForSchedule);\n\n      // Create outfit schedule in Supabase\n      const { data: scheduleData, error: scheduleError } = await supabase\n        .from('outfit_schedules')\n        .insert([\n          {\n            user_id: user.id,\n            outfit_id: selectedOutfitForSchedule.id,\n            date: formattedDate,\n          },\n        ])\n        .select()\n        .single();\n\n      if (scheduleError) {\n        console.error('Error creating schedule:', scheduleError);\n        throw scheduleError;\n      }\n      console.log('Created outfit schedule:', scheduleData);\n\n      // If Google Calendar is connected, create calendar event\n      if (isGoogleCalendarConnected) {\n        try {\n          // Get user's Google Calendar settings\n          const { data: settings } = await supabase\n            .from('user_settings')\n            .select('google_access_token')\n            .eq('user_id', user.id)\n            .single();\n\n          if (!settings?.google_access_token) {\n            console.log('No Google access token found');\n            return;\n          }\n\n          // Make sure gapi is loaded and initialized\n          if (typeof window.gapi === 'undefined' || !window.gapi.client) {\n            console.log('Loading Google API...');\n            await new Promise((resolve, reject) => {\n              const script = document.createElement('script');\n              script.src = 'https://apis.google.com/js/api.js';\n              script.onload = () => {\n                (window.gapi as any).load('client', async () => {\n                  try {\n                    await (window.gapi as any).client.init({\n                      apiKey: process.env.REACT_APP_GOOGLE_API_KEY as string,\n                      discoveryDocs: ['https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest'],\n                    });\n                    console.log('Google Calendar API initialized successfully');\n                    resolve(true);\n                  } catch (error) {\n                    reject(error);\n                  }\n                });\n              };\n              script.onerror = reject;\n              document.body.appendChild(script);\n            });\n          }\n\n          // Set the access token for API calls\n          (window.gapi as any).client.setToken({\n            access_token: settings.google_access_token\n          });\n\n          // Create a Date object for the selected date\n          const selectedDate = new Date(scheduleDate);\n          \n          // Set the time to noon in the user's timezone\n          selectedDate.setHours(12, 0, 0, 0);\n\n          const event = {\n            'summary': `Outfit: ${selectedOutfitForSchedule.name}`,\n            'description': `Outfit ID: ${selectedOutfitForSchedule.id}`,\n            'start': {\n              'dateTime': selectedDate.toISOString(),\n              'timeZone': Intl.DateTimeFormat().resolvedOptions().timeZone,\n            },\n            'end': {\n              'dateTime': new Date(selectedDate.getTime() + (8 * 60 * 60 * 1000)).toISOString(), // 8 hours later\n              'timeZone': Intl.DateTimeFormat().resolvedOptions().timeZone,\n            },\n          };\n\n          console.log('Creating Google Calendar event:', event);\n          const response = await window.gapi.client.calendar.events.insert({\n            'calendarId': 'primary',\n            'resource': event,\n          });\n          console.log('Google Calendar event created:', response);\n\n          // Update outfit schedule with Google Calendar event ID\n          await supabase\n            .from('outfit_schedules')\n            .update({ google_event_id: response.result.id })\n            .eq('id', scheduleData.id);\n          console.log('Updated schedule with Google event ID');\n        } catch (error) {\n          console.error('Error creating Google Calendar event:', error);\n          alert('Failed to create Google Calendar event. The outfit was scheduled, but not added to your calendar.');\n        }\n      }\n\n      setShowScheduleModal(false);\n      setSelectedOutfitForSchedule(null);\n      setScheduleDate('');\n      \n      // Fetch updated scheduled outfits\n      console.log('Fetching updated scheduled outfits after scheduling');\n      await fetchScheduledOutfits();\n      \n      if (isGoogleCalendarConnected) {\n        console.log('Fetching updated calendar events after scheduling');\n        await fetchCalendarEvents();\n      }\n    } catch (error) {\n      console.error('Error scheduling outfit:', error);\n      alert('Error scheduling outfit. Please try again.');\n    }\n  };\n\n  const handleDeleteSchedule = async (scheduleId: string) => {\n    if (window.confirm('Are you sure you want to remove this outfit from your schedule?')) {\n      try {\n        const { error } = await supabase\n          .from('outfit_schedules')\n          .delete()\n          .eq('id', scheduleId);\n\n        if (error) throw error;\n        fetchScheduledOutfits();\n      } catch (error) {\n        console.error('Error deleting scheduled outfit:', error);\n        alert('Error removing outfit from schedule');\n      }\n    }\n  };\n\n  const getSortedItems = (items: ClothingItem[]) => {\n    return [...items].sort((a, b) => {\n      const indexA = categoryOrder.indexOf(a.category);\n      const indexB = categoryOrder.indexOf(b.category);\n      return indexA - indexB;\n    });\n  };\n\n  const formatDate = (dateString: string) => {\n    // Create a date object in the user's timezone\n    const date = new Date(dateString + 'T00:00:00');\n    return date.toLocaleDateString('en-US', { \n      weekday: 'long', \n      year: 'numeric', \n      month: 'long', \n      day: 'numeric' \n    });\n  };\n\n  const ensureUserSettingsTable = async () => {\n    try {\n      console.log('Ensuring user_settings table has correct structure...');\n      \n      // Check if user is authenticated\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) {\n        console.log('No authenticated user found');\n        return;\n      }\n      \n      // Check if user_settings table exists\n      const { error: tableCheckError } = await supabase\n        .from('user_settings')\n        .select('id')\n        .limit(1);\n      \n      if (tableCheckError) {\n        console.error('Error checking user_settings table:', tableCheckError);\n        console.log('Please run the SQL script to create the user_settings table with the correct structure');\n        return;\n      }\n      \n      // Check if user has a settings record\n      const { data: settings, error: settingsError } = await supabase\n        .from('user_settings')\n        .select('*')\n        .eq('user_id', user.id)\n        .single();\n      \n      if (settingsError) {\n        console.log('User settings record not found, creating one...');\n        const { error: createError } = await supabase\n          .from('user_settings')\n          .insert({\n            user_id: user.id,\n            google_calendar_connected: false,\n            google_access_token: null,\n            google_refresh_token: null,\n            google_token_expiry: null\n          });\n          \n        if (createError) {\n          console.error('Error creating user settings:', createError);\n          return;\n        }\n        \n        console.log('User settings record created');\n      } else {\n        console.log('User settings record exists:', settings);\n        \n        // Check if the record has all required fields\n        const needsUpdate = !settings.google_token_expiry;\n        \n        if (needsUpdate) {\n          console.log('Updating user settings record with missing fields...');\n          const { error: updateError } = await supabase\n            .from('user_settings')\n            .update({\n              google_token_expiry: new Date(Date.now() + 3600000).toISOString() // 1 hour from now\n            })\n            .eq('user_id', user.id);\n            \n          if (updateError) {\n            console.error('Error updating user settings:', updateError);\n            console.log('Please run the SQL script to add the missing column to the user_settings table');\n            return;\n          }\n          \n          console.log('User settings record updated with missing fields');\n        }\n      }\n    } catch (error) {\n      console.error('Error ensuring user_settings table:', error);\n    }\n  };\n\n  const fetchWeatherData = async () => {\n    try {\n      setWeatherLoading(true);\n      setWeatherError(null);\n      \n      const apiKey = process.env.REACT_APP_OPENWEATHER_API_KEY;\n      \n      if (!apiKey) {\n        throw new Error('OpenWeather API key is not configured');\n      }\n\n      const city = 'Toronto'; // You can make this dynamic based on user location\n      \n      // Fetch 5-day forecast\n      const forecastResponse = await fetch(\n        `https://api.openweathermap.org/data/2.5/forecast?q=${city}&appid=${apiKey}&units=metric`\n      );\n\n      if (!forecastResponse.ok) {\n        throw new Error('Failed to fetch forecast data');\n      }\n\n      const forecastData = await forecastResponse.json();\n      \n      // Process forecast data to get one reading per day at noon\n      const dailyForecasts = forecastData.list\n        .filter((item: any, index: number) => index % 8 === 0) // Get one reading per day (every 8th item as data is in 3-hour intervals)\n        .map((item: any) => {\n          // Map OpenWeather condition codes to our local weather icons\n          let iconPath = '/images/weather-icons/clear-day.png'; // Default icon\n          \n          const condition = item.weather[0].main.toLowerCase();\n          const description = item.weather[0].description.toLowerCase();\n          \n          if (condition.includes('clear')) {\n            // Check if it's day or night\n            const hour = new Date(item.dt * 1000).getHours();\n            iconPath = (hour >= 6 && hour < 18) \n              ? '/images/weather-icons/clear-day.png' \n              : '/images/weather-icons/clear-night.png';\n          } else if (condition.includes('cloud')) {\n            iconPath = '/images/weather-icons/cloudy.png';\n          } else if (condition.includes('rain')) {\n            if (description.includes('drizzle')) {\n              iconPath = '/images/weather-icons/drizzle.png';\n            } else {\n              iconPath = '/images/weather-icons/rain.png';\n            }\n          } else if (condition.includes('snow')) {\n            iconPath = '/images/weather-icons/snow.png';\n          } else if (condition.includes('thunderstorm')) {\n            iconPath = '/images/weather-icons/thunderstorm.png';\n          } else if (condition.includes('mist') || condition.includes('fog') || condition.includes('haze')) {\n            iconPath = '/images/weather-icons/fog.png';\n          }\n          \n          return {\n            date: new Date(item.dt * 1000).toISOString().split('T')[0], // Format as YYYY-MM-DD\n            temperature: Math.round(item.main.temp),\n            condition: item.weather[0].main,\n            icon: iconPath\n          };\n        })\n        .slice(0, 5); // Get only 5 days\n\n      console.log('Fetched weather data:', dailyForecasts);\n      setWeatherData(dailyForecasts);\n    } catch (error) {\n      console.error('Error fetching weather:', error);\n      setWeatherError(error instanceof Error ? error.message : 'Failed to load weather data');\n    } finally {\n      setWeatherLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"dashboard\">\n      <div className=\"dashboard-header\">\n        <div className=\"header-content\">\n          <h1 className=\"dashboard-title\">Outfit Planner</h1>\n        </div>\n        <button onClick={() => navigate('/')} className=\"btn btn-secondary\" style={{\n          fontSize: \"16px\",\n          color: \"#fefefd\",\n          backgroundColor: \"#d07d6b\",\n          padding: \"10px 20px\",\n          textTransform: \"uppercase\",\n          fontWeight: \"bold\",\n          borderRadius: \"5px\",\n          border: \"none\",\n          cursor: \"pointer\",\n          display: \"inline-block\",\n          textDecoration: \"none\",\n          transition: \"all 0.3s ease-in-out\"\n        }}>\n          Back to Dashboard\n        </button>\n      </div>\n\n      <div className=\"outfit-planner-tabs\">\n      <button \n          className={`tab-button ${activeTab === 'planner' ? 'active' : ''}`}\n          onClick={() => setActiveTab('planner')}\n          style={{\n            fontSize: \"16px\",\n            color: activeTab === 'planner' ? \"#d07d6b\" : \"#3b3b3b\",\n            backgroundColor: \"transparent\",\n            padding: \"10px 20px\",\n            textTransform: \"uppercase\",\n            fontWeight: \"bold\",\n            borderRadius: \"5px\",\n            border: \"none\",\n            borderBottom: activeTab === 'planner' ? \"2px solid #d07d6b\" : \"2px solid transparent\",\n            cursor: \"pointer\",\n            display: \"inline-block\",\n            textDecoration: \"none\",\n            transition: \"all 0.3s ease-in-out\"\n          }}\n        >\n          Outfit Planner\n        </button>\n        <button \n          className={`tab-button ${activeTab === 'calendar' ? 'active' : ''}`}\n          onClick={() => setActiveTab('calendar')}\n          style={{\n            fontSize: \"16px\",\n            color: activeTab === 'calendar' ? \"#d07d6b\" : \"#3b3b3b\",\n            backgroundColor: \"transparent\",\n            padding: \"10px 20px\",\n            textTransform: \"uppercase\",\n            fontWeight: \"bold\",\n            borderRadius: \"5px\",\n            border: \"none\",\n            borderBottom: activeTab === 'calendar' ? \"2px solid #d07d6b\" : \"2px solid transparent\",\n            cursor: \"pointer\",\n            display: \"inline-block\",\n            textDecoration: \"none\",\n            transition: \"all 0.3s ease-in-out\"\n          }}\n        >\n          Calendar\n        </button>\n      </div>\n\n      {activeTab === 'calendar' && (\n        <div className=\"outfit-calendar-container\">\n          <div className=\"calendar-header\">\n            <h2 className=\"section-title\">Outfit Calendar</h2>\n            <div className=\"calendar-view-toggle\">\n              <button \n                className={`btn btn-secondary ${showCalendarView ? 'active' : ''}`}\n                onClick={() => setShowCalendarView(true)}\n                style={{\n                  fontSize: \"16px\",\n                  color: showCalendarView ? \"#fefefd\" : \"#6b7280\",\n                  backgroundColor: showCalendarView ? \"#d07d6b\" : \"#f3f4f6\",\n                  padding: \"10px 20px\",\n                  textTransform: \"uppercase\",\n                  fontWeight: \"bold\",\n                  borderRadius: \"5px\",\n                  border: \"none\",\n                  cursor: \"pointer\",\n                  display: \"inline-block\",\n                  textDecoration: \"none\",\n                  transition: \"all 0.3s ease-in-out\"\n                }}\n              >\n                Calendar View\n              </button>\n              <button \n                className={`btn btn-secondary ${!showCalendarView ? 'active' : ''}`}\n                onClick={() => setShowCalendarView(false)}\n                style={{\n                  fontSize: \"16px\",\n                  color: !showCalendarView ? \"#fefefd\" : \"#6b7280\",\n                  backgroundColor: !showCalendarView ? \"#d07d6b\" : \"#f3f4f6\",\n                  padding: \"10px 20px\",\n                  textTransform: \"uppercase\",\n                  fontWeight: \"bold\",\n                  borderRadius: \"5px\",\n                  border: \"none\",\n                  cursor: \"pointer\",\n                  display: \"inline-block\",\n                  textDecoration: \"none\",\n                  transition: \"all 0.3s ease-in-out\"\n                }}\n              >\n                List View\n              </button>\n            </div>\n          </div>\n\n          {!showCalendarView ? (\n            <div className=\"scheduled-outfits-list\">\n              {scheduledOutfits.length === 0 ? (\n                <div className=\"no-items-message\">\n                  <p>No outfits scheduled yet.</p>\n                </div>\n              ) : (\n                scheduledOutfits\n                  .sort((a, b) => new Date(a.date).getTime() - new Date(b.date).getTime())\n                  .map((schedule) => {\n                    console.log('Rendering schedule in list view:', schedule);\n                    return (\n                      <div key={schedule.id} className=\"scheduled-outfit-card\">\n                        <div className=\"scheduled-outfit-date\">\n                          {formatDate(schedule.date)}\n                        </div>\n                        {schedule.outfit ? (\n                          <div className=\"scheduled-outfit-details\">\n                            <div className=\"outfit-info\">\n                              <h4>{schedule.outfit.name}</h4>\n                              {schedule.outfit.occasion && (\n                                <span className=\"outfit-occasion\">{schedule.outfit.occasion}</span>\n                              )}\n                            </div>\n                            <div className=\"outfit-preview\">\n                              {getSortedItems(schedule.outfit.items).map((item) => (\n                                <img\n                                  key={item.id}\n                                  src={item.image_url}\n                                  alt={item.name || item.category}\n                                  className=\"outfit-item-image\"\n                                  style={{ width: '40px', height: '40px', objectFit: 'cover', borderRadius: '4px', marginRight: '4px' }}\n                                />\n                              ))}\n                            </div>\n                          </div>\n                        ) : (\n                          <div className=\"scheduled-outfit-details\">\n                            <p>Outfit details not available</p>\n                          </div>\n                        )}\n                        <div className=\"scheduled-outfit-actions\">\n                          <button \n                            onClick={() => handleDeleteSchedule(schedule.id)}\n                            className=\"btn btn-secondary\"\n                            style={{\n                              fontSize: \"14px\",\n                              color: \"#fefefd\",\n                              backgroundColor: \"#ef4444\",\n                              padding: \"8px 16px\",\n                              textTransform: \"uppercase\",\n                              fontWeight: \"bold\",\n                              borderRadius: \"5px\",\n                              border: \"none\",\n                              cursor: \"pointer\"\n                            }}\n                          >\n                            Remove\n                          </button>\n                        </div>\n                      </div>\n                    );\n                  })\n              )}\n            </div>\n          ) : (\n            <div className=\"calendar-view\">\n              {!isGoogleCalendarConnected ? (\n                <div className=\"no-items-message\">\n                  <p>Please connect your Google Calendar to view your scheduled outfits in calendar view.</p>\n                  <button onClick={connectGoogleCalendar} className=\"btn btn-secondary\" style={{\n                    fontSize: \"16px\",\n                    color: \"#fefefd\",\n                    backgroundColor: \"#d07d6b\",\n                    padding: \"10px 20px\",\n                    textTransform: \"uppercase\",\n                    fontWeight: \"bold\",\n                    borderRadius: \"5px\",\n                    border: \"none\",\n                    cursor: \"pointer\",\n                    display: \"inline-block\",\n                    textDecoration: \"none\",\n                    transition: \"all 0.3s ease-in-out\"\n                  }}>\n                    Connect Google Calendar\n                  </button>\n                </div>\n              ) : calendarEvents.length === 0 ? (\n                <div className=\"no-items-message\">\n                  <p>No upcoming events found in your Google Calendar.</p>\n                  <p>Schedule an outfit from the Outfit Planner tab to see it here.</p>\n                </div>\n              ) : (() => {\n                console.log('Rendering Kanban calendar view with events:', calendarEvents);\n                console.log('Scheduled outfits for calendar view:', scheduledOutfits);\n                \n                // Group events by date\n                const groupedEvents = calendarEvents.reduce((acc: { [key: string]: GoogleCalendarEvent[] }, event) => {\n                  const formattedDate = getFormattedDate(event);\n                  if (!formattedDate) {\n                    console.warn('Could not format date for event:', event);\n                    return acc;\n                  }\n\n                  if (!acc[formattedDate]) {\n                    acc[formattedDate] = [];\n                  }\n                  acc[formattedDate].push(event);\n                  return acc;\n                }, {});\n                \n                // Get the next 5 days starting from today\n                const today = new Date();\n                const nextFiveDays = Array.from({ length: 5 }, (_, i) => {\n                  const date = new Date(today);\n                  date.setDate(today.getDate() + i);\n                  return date.toLocaleDateString('en-CA'); // Format as YYYY-MM-DD\n                });\n                \n                // Sort dates to ensure they're in chronological order\n                const sortedDates = nextFiveDays.sort((a, b) => {\n                  try {\n                    return new Date(a).getTime() - new Date(b).getTime();\n                  } catch (error) {\n                    console.error('Error sorting dates:', error);\n                    return 0;\n                  }\n                });\n                \n                console.log('Grouped events by date:', groupedEvents);\n                console.log('Next five days:', sortedDates);\n                \n                return (\n                  <div className=\"kanban-calendar-view\">\n                    {sortedDates.map((date) => {\n                      const events = groupedEvents[date] || [];\n                      console.log(`Rendering column for date ${date} with ${events.length} events`);\n                      \n                      // Find the outfit scheduled for this date using the specified format\n                      const scheduleMatch = scheduledOutfits.find(s => {\n                        const eventDate = getFormattedDate(s.outfit);\n                        return eventDate && s.date === eventDate;\n                      });\n                      const outfit = scheduleMatch?.outfit;\n                      console.log(`Outfit for date ${date}:`, outfit);\n                      \n                      // Create a date object for display\n                      const displayDate = new Date(date);\n                      \n                      return (\n                        <div key={date} className=\"kanban-day-column\">\n                          <div className=\"kanban-day-header\">\n                            <h3>{displayDate.toLocaleDateString('en-US', { \n                              weekday: 'short', \n                              month: 'short', \n                              day: 'numeric' \n                            })}</h3>\n                            \n                            {/* Add weather information */}\n                            {weatherData.length > 0 && (\n                              <div className=\"day-weather\">\n                                {weatherLoading ? (\n                                  <div className=\"weather-loading\">\n                                    <div className=\"spinner\" style={{ width: '16px', height: '16px', marginRight: '4px' }}></div>\n                                    Loading...\n                                  </div>\n                                ) : weatherError ? (\n                                  <div className=\"weather-error\">\n                                    <span>Weather unavailable</span>\n                                  </div>\n                                ) : (\n                                  (() => {\n                                    const dayWeather = weatherData.find(w => w.date === date);\n                                    if (dayWeather) {\n                                      return (\n                                        <div className=\"forecast-day\" style={{\n                                          padding: '8px',\n                                          backgroundColor: '#2462A2',\n                                          color: 'white',\n                                          borderRadius: '8px',\n                                          textAlign: 'center',\n                                          minWidth: '80px',\n                                          transition: 'transform 0.2s ease'\n                                        }}>\n                                          <p className=\"forecast-date\" style={{\n                                            fontSize: '0.9rem',\n                                            color: 'rgba(255, 255, 255, 0.9)',\n                                            margin: '0 0 0.5rem 0',\n                                            fontWeight: '500'\n                                          }}>\n                                            {displayDate.toLocaleDateString('en-US', { weekday: 'short' })}\n                                          </p>\n                                          <img \n                                            src={dayWeather.icon} \n                                            alt={dayWeather.condition} \n                                            className=\"forecast-icon\" \n                                            style={{ \n                                              width: '36px', \n                                              height: '36px',\n                                              margin: '0.25rem 0',\n                                              filter: 'drop-shadow(0 2px 4px rgba(0,0,0,0.1))',\n                                              transition: 'filter 0.3s ease',\n                                              objectFit: 'contain',\n                                              padding: '2px',\n                                              background: 'transparent'\n                                            }} \n                                          />\n                                          <p className=\"forecast-temp\" style={{\n                                            fontSize: '1.1rem',\n                                            fontWeight: '600',\n                                            color: 'white',\n                                            margin: '0'\n                                          }}>{dayWeather.temperature}°</p>\n                                        </div>\n                                      );\n                                    }\n                                    return null;\n                                  })()\n                                )}\n                              </div>\n                            )}\n                          </div>\n                          \n                          {/* Outfit bar at the top */}\n                          <div className={`kanban-outfit-bar ${outfit ? 'has-outfit' : 'no-outfit'}`}>\n                            {outfit ? (\n                              <div className=\"outfit-bar-content\">\n                                <div className=\"outfit-bar-title\">\n                                  <h4>{outfit.name}</h4>\n                                  {outfit.occasion && <span className=\"outfit-occasion\">{outfit.occasion}</span>}\n                                </div>\n                                <div className=\"outfit-bar-preview\">\n                                  {getSortedItems(outfit.items).map((item) => (\n                                    <img\n                                      key={item.id}\n                                      src={item.image_url}\n                                      alt={item.name || item.category}\n                                      className=\"outfit-bar-item-image\"\n                                    />\n                                  ))}\n                                </div>\n                              </div>\n                            ) : (\n                              <div className=\"no-outfit-message\">\n                                <p>No outfit scheduled</p>\n                              </div>\n                            )}\n                          </div>\n                          \n                          {/* Events for this day */}\n                          <div className=\"kanban-day-events\">\n                            {events.map((event) => {\n                              try {\n                                // Handle both dateTime and date formats\n                                let startTime;\n                                if (event.start.dateTime) {\n                                  startTime = new Date(event.start.dateTime);\n                                } else if (event.start.date) {\n                                  // For all-day events, use noon as the display time\n                                  startTime = new Date(event.start.date + 'T12:00:00');\n                                } else {\n                                  console.warn('Event missing start date:', event);\n                                  return null;\n                                }\n                                \n                                if (isNaN(startTime.getTime())) {\n                                  console.warn('Invalid start time for event:', event);\n                                  return null;\n                                }\n\n                                return (\n                                  <div key={event.id} className=\"kanban-event\">\n                                    <div className=\"event-time\">\n                                      {event.start.dateTime ? \n                                        startTime.toLocaleTimeString([], { \n                                          hour: '2-digit', \n                                          minute: '2-digit' \n                                        }) : \n                                        'All day'}\n                                    </div>\n                                    <div className=\"event-content\">\n                                      <h4>{event.summary}</h4>\n                                      {event.description && (\n                                        <p className=\"event-description\">{event.description}</p>\n                                      )}\n                                    </div>\n                                  </div>\n                                );\n                              } catch (error) {\n                                console.error('Error rendering event:', error);\n                                return null;\n                              }\n                            })}\n                          </div>\n                        </div>\n                      );\n                    })}\n                  </div>\n                );\n              })()}\n            </div>\n          )}\n        </div>\n      )}\n\n      {activeTab === 'planner' && (\n        <div className=\"outfit-planner-container\">\n          <div className=\"outfit-preview-section\">\n            <h2 className=\"section-title\">Current Outfit</h2>\n            <div className=\"outfit-preview-grid\">\n              {getSortedItems(selectedItems).map((item) => (\n                <div \n                  key={item.id} \n                  className=\"outfit-preview-item\"\n                  onClick={() => handleItemUnselect(item)}\n                  style={{ cursor: 'pointer' }}\n                >\n                  <img\n                    src={item.image_url}\n                    alt={item.name || item.category}\n                    className=\"outfit-preview-image\"\n                  />\n                  <div className=\"outfit-preview-details\">\n                    <h3>{item.name || item.category}</h3>\n                    {item.brand && <p className=\"item-brand\">{item.brand}</p>}\n                  </div>\n                </div>\n              ))}\n            </div>\n            <div className=\"outfit-actions\">\n              <button onClick={handleRandomize} className=\"btn btn-primary\" style={{\n                fontSize: \"16px\",\n                color: \"#fefefd\",\n                backgroundColor: \"#d07d6b\",\n                padding: \"10px 20px\",\n                textTransform: \"uppercase\",\n                fontWeight: \"bold\",\n                borderRadius: \"5px\",\n                border: \"none\",\n                cursor: \"pointer\",\n                display: \"inline-block\",\n                textDecoration: \"none\",\n                transition: \"all 0.3s ease-in-out\"\n              }}>\n                Randomize Outfit\n              </button>\n              <button\n                onClick={() => setShowSaveModal(true)}\n                disabled={selectedItems.length === 0}\n                className=\"btn btn-primary\"\n                style={{\n                  fontSize: \"16px\",\n                  color: \"#fefefd\",\n                  backgroundColor: \"#d07d6b\",\n                  padding: \"10px 20px\",\n                  textTransform: \"uppercase\",\n                  fontWeight: \"bold\",\n                  borderRadius: \"5px\",\n                  border: \"none\",\n                  cursor: \"pointer\",\n                  display: \"inline-block\",\n                  textDecoration: \"none\",\n                  transition: \"all 0.3s ease-in-out\",\n                  opacity: selectedItems.length === 0 ? 0.5 : 1\n                }}\n              >\n                Save Outfit\n              </button>\n            </div>\n          </div>\n\n          <div className=\"clothing-selection-section\">\n            <h2 className=\"section-title\">Select Items</h2>\n            <div className=\"category-filters\">\n              <select\n                value={selectedCategory}\n                onChange={(e) => setSelectedCategory(e.target.value)}\n                className=\"form-select\"\n              >\n                <option value=\"\">All Categories</option>\n                {categories.map(category => (\n                  <option key={category} value={category}>{category}</option>\n                ))}\n              </select>\n            </div>\n            <div className=\"clothing-selection-grid\">\n              {clothingItems\n                .filter(item => !selectedCategory || item.category === selectedCategory)\n                .map((item) => (\n                  <div\n                    key={item.id}\n                    className={`clothing-selection-item ${\n                      selectedItems.some(i => i.id === item.id) ? 'selected' : ''\n                    }`}\n                    onClick={() => handleItemSelect(item)}\n                    style={{ cursor: 'pointer' }}\n                  >\n                    <img\n                      src={item.image_url}\n                      alt={item.name || item.category}\n                      className=\"clothing-selection-image\"\n                    />\n                    <div className=\"clothing-selection-details\">\n                      <h3>{item.name || item.category}</h3>\n                      {item.brand && <p className=\"item-brand\">{item.brand}</p>}\n                    </div>\n                  </div>\n                ))}\n            </div>\n          </div>\n\n          <div className=\"saved-outfits-section\">\n            <h2 className=\"section-title\">Saved Outfits</h2>\n            <div className=\"saved-outfits-grid\">\n              {savedOutfits.map((outfit) => (\n                <div key={outfit.id} className=\"saved-outfit-card\">\n                  <h3>{outfit.name}</h3>\n                  {outfit.occasion ? (\n                    <p className=\"outfit-occasion\">{outfit.occasion}</p>\n                  ) : (\n                    <p className=\"outfit-occasion\" style={{ visibility: \"hidden\" }}>No occasion</p>\n                  )}\n                  <div className=\"saved-outfit-preview\">\n                    {getSortedItems(outfit.items).map((item) => (\n                      <img\n                        key={item.id}\n                        src={item.image_url}\n                        alt={item.name || item.category}\n                        className=\"saved-outfit-item-image\"\n                      />\n                    ))}\n                  </div>\n                  <div className=\"saved-outfit-actions\" style={{\n                    display: \"flex\",\n                    flexDirection: \"column\",\n                    gap: \"10px\",\n                    width: \"100%\"\n                  }}>\n                    <button\n                      onClick={() => {\n                        setSelectedItems(outfit.items);\n                        window.scrollTo({ top: 0, behavior: 'smooth' });\n                      }}\n                      className=\"btn btn-secondary\"\n                      style={{\n                        fontSize: \"16px\",\n                        color: \"#fefefd\",\n                        backgroundColor: \"#d07d6b\",\n                        padding: \"10px 20px\",\n                        textTransform: \"uppercase\",\n                        fontWeight: \"bold\",\n                        borderRadius: \"5px\",\n                        border: \"none\",\n                        cursor: \"pointer\",\n                        display: \"inline-block\",\n                        textDecoration: \"none\",\n                        transition: \"all 0.3s ease-in-out\",\n                        width: \"100%\"\n                      }}\n                    >\n                      Load\n                    </button>\n                    <button\n                      onClick={() => {\n                        setSelectedOutfitForSchedule(outfit);\n                        setShowScheduleModal(true);\n                      }}\n                      className=\"btn btn-secondary\"\n                      style={{\n                        fontSize: \"16px\",\n                        color: \"#fefefd\",\n                        backgroundColor: \"#d07d6b\",\n                        padding: \"10px 20px\",\n                        textTransform: \"uppercase\",\n                        fontWeight: \"bold\",\n                        borderRadius: \"5px\",\n                        border: \"none\",\n                        cursor: \"pointer\",\n                        display: \"inline-block\",\n                        textDecoration: \"none\",\n                        transition: \"all 0.3s ease-in-out\",\n                        width: \"100%\"\n                      }}\n                    >\n                      Schedule\n                    </button>\n                    <button\n                      onClick={() => handleDeleteOutfit(outfit.id)}\n                      className=\"btn btn-danger\"\n                      style={{\n                        fontSize: \"16px\",\n                        color: \"#fefefd\",\n                        backgroundColor: \"#ef4444\",\n                        padding: \"10px 20px\",\n                        textTransform: \"uppercase\",\n                        fontWeight: \"bold\",\n                        borderRadius: \"5px\",\n                        border: \"none\",\n                        cursor: \"pointer\",\n                        display: \"inline-block\",\n                        textDecoration: \"none\",\n                        transition: \"all 0.3s ease-in-out\",\n                        width: \"100%\"\n                      }}\n                    >\n                      Delete\n                    </button>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Save Outfit Modal */}\n      {showSaveModal && (\n        <div className=\"modal-overlay\">\n          <div className=\"modal-content\">\n            <h2 className=\"section-title\">Save Outfit</h2>\n            <div className=\"form-group\">\n              <label>Outfit Name:</label>\n              <input\n                type=\"text\"\n                value={outfitName}\n                onChange={(e) => setOutfitName(e.target.value)}\n                placeholder=\"Enter a name for your outfit\"\n                className=\"form-input\"\n              />\n            </div>\n            <div className=\"form-group\">\n              <label>Occasion (optional):</label>\n              <input\n                type=\"text\"\n                value={outfitOccasion}\n                onChange={(e) => setOutfitOccasion(e.target.value)}\n                placeholder=\"Enter an occasion\"\n                className=\"form-input\"\n              />\n            </div>\n            <div className=\"modal-actions\">\n              <button\n                onClick={() => {\n                  setShowSaveModal(false);\n                  setOutfitName('');\n                  setOutfitOccasion('');\n                }}\n                className=\"btn btn-secondary\"\n                style={{\n                  fontSize: \"16px\",\n                  color: \"#fefefd\",\n                  backgroundColor: \"#d07d6b\",\n                  padding: \"10px 20px\",\n                  textTransform: \"uppercase\",\n                  fontWeight: \"bold\",\n                  borderRadius: \"5px\",\n                  border: \"none\",\n                  cursor: \"pointer\",\n                  display: \"inline-block\",\n                  textDecoration: \"none\",\n                  transition: \"all 0.3s ease-in-out\"\n                }}\n              >\n                Cancel\n              </button>\n              <button\n                onClick={handleSaveOutfit}\n                disabled={!outfitName}\n                className=\"btn btn-primary\"\n                style={{\n                  fontSize: \"16px\",\n                  color: \"#fefefd\",\n                  backgroundColor: \"#d07d6b\",\n                  padding: \"10px 20px\",\n                  textTransform: \"uppercase\",\n                  fontWeight: \"bold\",\n                  borderRadius: \"5px\",\n                  border: \"none\",\n                  cursor: \"pointer\",\n                  display: \"inline-block\",\n                  textDecoration: \"none\",\n                  transition: \"all 0.3s ease-in-out\",\n                  opacity: !outfitName ? 0.5 : 1\n                }}\n              >\n                Save\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Schedule Outfit Modal */}\n      {showScheduleModal && (\n        <div className=\"modal-overlay\">\n          <div className=\"modal-content\">\n            <h2 className=\"section-title\">Schedule Outfit</h2>\n            <div className=\"form-group\">\n              <label>Select Date:</label>\n              <input\n                type=\"date\"\n                value={scheduleDate}\n                onChange={(e) => setScheduleDate(e.target.value)}\n                className=\"form-input\"\n                min={new Date().toISOString().split('T')[0]}\n              />\n            </div>\n            <div className=\"scheduled-outfit-preview\">\n              <h3>{selectedOutfitForSchedule?.name}</h3>\n              {selectedOutfitForSchedule?.occasion && (\n                <p className=\"outfit-occasion\">{selectedOutfitForSchedule.occasion}</p>\n              )}\n              <div className=\"outfit-preview-grid\">\n                {selectedOutfitForSchedule?.items && getSortedItems(selectedOutfitForSchedule.items).map((item) => (\n                  <div key={item.id} className=\"outfit-preview-item\">\n                    <img\n                      src={item.image_url}\n                      alt={item.name || item.category}\n                      className=\"outfit-preview-image\"\n                    />\n                    <div className=\"outfit-preview-details\">\n                      <h3>{item.name || item.category}</h3>\n                      {item.brand && <p className=\"item-brand\">{item.brand}</p>}\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n            <div className=\"modal-actions\">\n              <button\n                onClick={() => {\n                  setShowScheduleModal(false);\n                  setSelectedOutfitForSchedule(null);\n                  setScheduleDate('');\n                }}\n                className=\"btn btn-secondary\"\n                style={{\n                  fontSize: \"16px\",\n                  color: \"#fefefd\",\n                  backgroundColor: \"#d07d6b\",\n                  padding: \"10px 20px\",\n                  textTransform: \"uppercase\",\n                  fontWeight: \"bold\",\n                  borderRadius: \"5px\",\n                  border: \"none\",\n                  cursor: \"pointer\",\n                  display: \"inline-block\",\n                  textDecoration: \"none\",\n                  transition: \"all 0.3s ease-in-out\"\n                }}\n              >\n                Cancel\n              </button>\n              <button\n                onClick={handleScheduleOutfit}\n                disabled={!scheduleDate}\n                className=\"btn btn-primary\"\n                style={{\n                  fontSize: \"16px\",\n                  color: \"#fefefd\",\n                  backgroundColor: \"#d07d6b\",\n                  padding: \"10px 20px\",\n                  textTransform: \"uppercase\",\n                  fontWeight: \"bold\",\n                  borderRadius: \"5px\",\n                  border: \"none\",\n                  cursor: \"pointer\",\n                  display: \"inline-block\",\n                  textDecoration: \"none\",\n                  transition: \"all 0.3s ease-in-out\",\n                  opacity: !scheduleDate ? 0.5 : 1\n                }}\n              >\n                Schedule\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default OutfitPlanner; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}