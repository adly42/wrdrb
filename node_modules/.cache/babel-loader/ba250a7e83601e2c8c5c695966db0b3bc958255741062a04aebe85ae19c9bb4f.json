{"ast":null,"code":"var _jsxFileName = \"/Users/adlyazim/Documents/GitHub/ENTI674-Team3-FinalProject/client/src/pages/OutfitPlanner.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { supabase } from '../utils/supabaseClient';\nimport { useNavigate } from 'react-router-dom';\nimport '../styles/main.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst OutfitPlanner = () => {\n  _s();\n  const navigate = useNavigate();\n  const [clothingItems, setClothingItems] = useState([]);\n  const [selectedItems, setSelectedItems] = useState([]);\n  const [savedOutfits, setSavedOutfits] = useState([]);\n  const [showSaveModal, setShowSaveModal] = useState(false);\n  const [outfitName, setOutfitName] = useState('');\n  const [outfitOccasion, setOutfitOccasion] = useState('');\n  const [selectedCategory, setSelectedCategory] = useState('');\n  const [scheduledOutfits, setScheduledOutfits] = useState([]);\n  const [showScheduleModal, setShowScheduleModal] = useState(false);\n  const [selectedOutfitForSchedule, setSelectedOutfitForSchedule] = useState(null);\n  const [scheduleDate, setScheduleDate] = useState('');\n  const [isGoogleCalendarConnected, setIsGoogleCalendarConnected] = useState(false);\n  const [activeTab, setActiveTab] = useState('planner');\n  const [calendarEvents, setCalendarEvents] = useState([]);\n  const [showCalendarView, setShowCalendarView] = useState(false);\n  const categories = ['Jacket', 'Shirt', 'T-Shirt', 'Sweater', 'Dress', 'Skirt', 'Pants', 'Shorts', 'Jeans', 'Shoes', 'Accessories'];\n  const categoryOrder = ['Headwear', 'Jacket', 'Shirt', 'T-Shirt', 'Sweater', 'Dress', 'Skirt', 'Pants', 'Shorts', 'Jeans', 'Shoes', 'Accessories'];\n  useEffect(() => {\n    fetchClothingItems();\n    fetchSavedOutfits();\n    checkOutfitSchedulesTable();\n    fetchScheduledOutfits();\n    checkGoogleCalendarConnection();\n    checkUserSettingsTable();\n  }, []);\n  const fetchClothingItems = async () => {\n    try {\n      // Get the current user's ID\n      const {\n        data: {\n          user\n        }\n      } = await supabase.auth.getUser();\n      if (!user) {\n        throw new Error('No authenticated user found');\n      }\n      const {\n        data,\n        error\n      } = await supabase.from('clothing_items').select('*').eq('user_id', user.id);\n      if (error) throw error;\n      if (data) setClothingItems(data);\n    } catch (error) {\n      console.error('Error fetching clothing items:', error);\n    }\n  };\n  const fetchSavedOutfits = async () => {\n    try {\n      // Get the current user's ID\n      const {\n        data: {\n          user\n        }\n      } = await supabase.auth.getUser();\n      if (!user) {\n        throw new Error('No authenticated user found');\n      }\n      const {\n        data,\n        error\n      } = await supabase.from('outfits').select('*').eq('user_id', user.id).order('created_at', {\n        ascending: false\n      });\n      if (error) throw error;\n      if (data) {\n        // Fetch the actual clothing items for each outfit\n        const outfitsWithItems = await Promise.all(data.map(async outfit => {\n          const {\n            data: items\n          } = await supabase.from('clothing_items').select('*').in('id', outfit.items);\n          return {\n            ...outfit,\n            items: items || []\n          };\n        }));\n        setSavedOutfits(outfitsWithItems);\n      }\n    } catch (error) {\n      console.error('Error fetching saved outfits:', error);\n    }\n  };\n  const fetchScheduledOutfits = async () => {\n    try {\n      console.log('Fetching scheduled outfits...');\n      const {\n        data: {\n          user\n        }\n      } = await supabase.auth.getUser();\n      if (!user) {\n        console.log('No authenticated user found');\n        return;\n      }\n      console.log('User ID:', user.id);\n\n      // First, fetch the scheduled outfits\n      const {\n        data: schedules,\n        error: schedulesError\n      } = await supabase.from('outfit_schedules').select('*').eq('user_id', user.id).order('date', {\n        ascending: true\n      });\n      if (schedulesError) {\n        console.error('Error fetching schedules:', schedulesError);\n        throw schedulesError;\n      }\n      console.log('Fetched schedules:', schedules);\n      if (schedules) {\n        // Then, fetch the outfits for these schedules\n        const outfitIds = schedules.map(schedule => schedule.outfit_id);\n        console.log('Outfit IDs to fetch:', outfitIds);\n\n        // First fetch the outfits\n        const {\n          data: outfits,\n          error: outfitsError\n        } = await supabase.from('outfits').select('*').in('id', outfitIds);\n        if (outfitsError) {\n          console.error('Error fetching outfits:', outfitsError);\n          throw outfitsError;\n        }\n        console.log('Fetched outfits:', outfits);\n\n        // Then fetch the clothing items for each outfit\n        const outfitsWithItems = await Promise.all(outfits.map(async outfit => {\n          const {\n            data: items\n          } = await supabase.from('clothing_items').select('*').in('id', outfit.items);\n          return {\n            ...outfit,\n            items: items || []\n          };\n        }));\n\n        // Combine the data\n        const transformedSchedules = schedules.map(schedule => ({\n          ...schedule,\n          outfit: outfitsWithItems.find(outfit => outfit.id === schedule.outfit_id)\n        }));\n        console.log('Transformed schedules:', transformedSchedules);\n        setScheduledOutfits(transformedSchedules);\n      }\n    } catch (error) {\n      console.error('Error in fetchScheduledOutfits:', error);\n    }\n  };\n  const checkOutfitSchedulesTable = async () => {\n    try {\n      // Try to query the table to see if it exists\n      const {\n        error\n      } = await supabase.from('outfit_schedules').select('id').limit(1);\n      if (error) {\n        console.error('Error checking outfit_schedules table:', error);\n\n        // If the error indicates the table doesn't exist, create it\n        if (error.code === '42P01') {\n          // PostgreSQL error code for undefined_table\n          console.log('Creating outfit_schedules table...');\n          await createOutfitSchedulesTable();\n        }\n      } else {\n        console.log('outfit_schedules table exists');\n      }\n    } catch (error) {\n      console.error('Error in checkOutfitSchedulesTable:', error);\n    }\n  };\n  const createOutfitSchedulesTable = async () => {\n    try {\n      // This is a simplified approach - in a real app, you'd use migrations\n      // or have the table created by your backend\n      console.log('This feature requires the outfit_schedules table to be created in Supabase.');\n      console.log('Please run the SQL in the outfit_schedules.sql file in your Supabase SQL editor.');\n\n      // Show a more user-friendly message\n      alert('The outfit scheduling feature requires database setup. Please contact the administrator.');\n    } catch (error) {\n      console.error('Error creating outfit_schedules table:', error);\n    }\n  };\n  const handleRandomize = () => {\n    const newSelectedItems = [];\n    const usedCategories = new Set();\n\n    // Shuffle the clothing items\n    const shuffledItems = [...clothingItems].sort(() => Math.random() - 0.5);\n\n    // Select one item from each category\n    for (const item of shuffledItems) {\n      if (!usedCategories.has(item.category)) {\n        newSelectedItems.push(item);\n        usedCategories.add(item.category);\n      }\n    }\n    setSelectedItems(newSelectedItems);\n  };\n  const handleItemSelect = item => {\n    // Remove any existing item of the same category\n    const filteredItems = selectedItems.filter(i => i.category !== item.category);\n    setSelectedItems([...filteredItems, item]);\n  };\n  const handleSaveOutfit = async () => {\n    if (!outfitName || selectedItems.length === 0) {\n      alert('Please provide a name for the outfit and select at least one item');\n      return;\n    }\n    try {\n      // Get the current user's ID\n      const {\n        data: {\n          user\n        }\n      } = await supabase.auth.getUser();\n      if (!user) {\n        throw new Error('No authenticated user found');\n      }\n      console.log('Saving outfit with data:', {\n        user_id: user.id,\n        name: outfitName,\n        occasion: outfitOccasion || null,\n        items: selectedItems.map(item => item.id)\n      });\n      const {\n        data,\n        error\n      } = await supabase.from('outfits').insert([{\n        user_id: user.id,\n        name: outfitName,\n        occasion: outfitOccasion || null,\n        items: selectedItems.map(item => item.id)\n      }]).select();\n      if (error) {\n        console.error('Supabase error details:', error);\n        throw error;\n      }\n      console.log('Successfully saved outfit:', data);\n      setShowSaveModal(false);\n      setOutfitName('');\n      setOutfitOccasion('');\n      fetchSavedOutfits();\n    } catch (error) {\n      console.error('Error saving outfit:', error);\n      if (error instanceof Error) {\n        alert(`Error saving outfit: ${error.message}`);\n      } else {\n        alert('Error saving outfit. Please check the console for details.');\n      }\n    }\n  };\n  const handleDeleteOutfit = async outfitId => {\n    if (window.confirm('Are you sure you want to delete this outfit?')) {\n      try {\n        const {\n          error\n        } = await supabase.from('outfits').delete().eq('id', outfitId);\n        if (error) throw error;\n        fetchSavedOutfits();\n      } catch (error) {\n        console.error('Error deleting outfit:', error);\n        alert('Error deleting outfit');\n      }\n    }\n  };\n  const checkGoogleCalendarConnection = async () => {\n    try {\n      const {\n        data: {\n          user\n        }\n      } = await supabase.auth.getUser();\n      if (!user) return;\n\n      // Check if user has Google Calendar connected\n      const {\n        data: settings\n      } = await supabase.from('user_settings').select('google_calendar_connected').eq('user_id', user.id).single();\n      setIsGoogleCalendarConnected((settings === null || settings === void 0 ? void 0 : settings.google_calendar_connected) || false);\n    } catch (error) {\n      console.error('Error checking Google Calendar connection:', error);\n    }\n  };\n  const fetchCalendarEvents = async () => {\n    try {\n      const {\n        data: {\n          user\n        }\n      } = await supabase.auth.getUser();\n      if (!user) return;\n\n      // Get user's Google Calendar settings\n      const {\n        data: settings\n      } = await supabase.from('user_settings').select('google_access_token').eq('user_id', user.id).single();\n      if (!(settings !== null && settings !== void 0 && settings.google_access_token)) {\n        console.log('No Google access token found');\n        setCalendarEvents([]);\n        return;\n      }\n\n      // Fetch events from Google Calendar\n      const response = await window.gapi.client.calendar.events.list({\n        'calendarId': 'primary',\n        'timeMin': new Date().toISOString(),\n        'showDeleted': false,\n        'singleEvents': true,\n        'maxResults': 10,\n        'orderBy': 'startTime'\n      });\n      const events = response.result.items || [];\n      console.log('Fetched calendar events:', events);\n      setCalendarEvents(events);\n\n      // Update outfit schedules with Google Calendar event IDs\n      const scheduledOutfitsWithEvents = await Promise.all(scheduledOutfits.map(async schedule => {\n        const matchingEvent = events.find(event => {\n          var _event$description;\n          return (_event$description = event.description) === null || _event$description === void 0 ? void 0 : _event$description.includes(`outfit_id:${schedule.outfit_id}`);\n        });\n        if (matchingEvent && !schedule.google_event_id) {\n          await supabase.from('outfit_schedules').update({\n            google_event_id: matchingEvent.id\n          }).eq('id', schedule.id);\n        }\n        return {\n          ...schedule,\n          google_event_id: (matchingEvent === null || matchingEvent === void 0 ? void 0 : matchingEvent.id) || schedule.google_event_id\n        };\n      }));\n      setScheduledOutfits(scheduledOutfitsWithEvents);\n    } catch (error) {\n      console.error('Error fetching calendar events:', error);\n      setCalendarEvents([]);\n    }\n  };\n  const connectGoogleCalendar = async () => {\n    try {\n      console.log('Starting Google Calendar connection process...');\n      const {\n        data: {\n          user\n        }\n      } = await supabase.auth.getUser();\n      if (!user) throw new Error('No authenticated user found');\n      console.log('User authenticated:', user.id);\n\n      // Check if gapi is loaded\n      if (typeof window.gapi === 'undefined') {\n        console.error('Google API (gapi) is not loaded. Make sure the script is included in index.html');\n        throw new Error('Google API not loaded. Please refresh the page and try again.');\n      }\n      console.log('Initializing Google Calendar API with:', {\n        apiKey: process.env.REACT_APP_GOOGLE_API_KEY ? 'API key exists' : 'API key missing',\n        clientId: process.env.REACT_APP_GOOGLE_CLIENT_ID ? 'Client ID exists' : 'Client ID missing'\n      });\n\n      // Wait for the Google API to be fully loaded\n      await new Promise((resolve, reject) => {\n        try {\n          window.gapi.load('client:auth2', {\n            callback: resolve,\n            onerror: reject\n          });\n        } catch (loadError) {\n          console.error('Error loading Google API:', loadError);\n          reject(loadError);\n        }\n      });\n      console.log('Google API loaded successfully');\n\n      // Initialize Google Calendar API\n      try {\n        await window.gapi.client.init({\n          apiKey: process.env.REACT_APP_GOOGLE_API_KEY,\n          clientId: process.env.REACT_APP_GOOGLE_CLIENT_ID,\n          discoveryDocs: ['https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest'],\n          scope: 'https://www.googleapis.com/auth/calendar.events'\n        });\n        console.log('Google API initialized successfully');\n      } catch (initError) {\n        console.error('Error initializing Google API:', initError);\n        throw new Error(`Failed to initialize Google API: ${initError instanceof Error ? initError.message : 'Unknown error'}`);\n      }\n\n      // Sign in with Google\n      try {\n        console.log('Attempting to sign in with Google...');\n        const googleUser = await window.gapi.auth2.getAuthInstance().signIn();\n        console.log('Google sign-in successful');\n\n        // Update user settings in Supabase\n        const {\n          error: settingsError\n        } = await supabase.from('user_settings').upsert({\n          user_id: user.id,\n          google_calendar_connected: true,\n          google_access_token: googleUser.getAuthResponse().access_token\n        });\n        if (settingsError) {\n          console.error('Error updating user settings:', settingsError);\n          throw new Error(`Failed to update user settings: ${settingsError.message}`);\n        }\n        console.log('User settings updated successfully');\n        setIsGoogleCalendarConnected(true);\n        fetchCalendarEvents();\n      } catch (signInError) {\n        console.error('Error during Google sign-in:', signInError);\n        throw new Error(`Google sign-in failed: ${signInError instanceof Error ? signInError.message : 'Unknown error'}`);\n      }\n    } catch (error) {\n      console.error('Error connecting to Google Calendar:', error);\n      alert(`Failed to connect to Google Calendar: ${error instanceof Error ? error.message : 'Unknown error'}`);\n    }\n  };\n  const handleScheduleOutfit = async () => {\n    if (!selectedOutfitForSchedule || !scheduleDate) {\n      alert('Please select an outfit and a date');\n      return;\n    }\n    try {\n      const {\n        data: {\n          user\n        }\n      } = await supabase.auth.getUser();\n      if (!user) {\n        throw new Error('No authenticated user found');\n      }\n\n      // Create outfit schedule in Supabase\n      const {\n        data: scheduleData,\n        error: scheduleError\n      } = await supabase.from('outfit_schedules').insert([{\n        user_id: user.id,\n        outfit_id: selectedOutfitForSchedule.id,\n        date: scheduleDate\n      }]).select().single();\n      if (scheduleError) throw scheduleError;\n\n      // If Google Calendar is connected, create calendar event\n      if (isGoogleCalendarConnected) {\n        const event = {\n          'summary': `Outfit: ${selectedOutfitForSchedule.name}`,\n          'description': `outfit_id:${selectedOutfitForSchedule.id}`,\n          'start': {\n            'dateTime': `${scheduleDate}T09:00:00`,\n            'timeZone': Intl.DateTimeFormat().resolvedOptions().timeZone\n          },\n          'end': {\n            'dateTime': `${scheduleDate}T17:00:00`,\n            'timeZone': Intl.DateTimeFormat().resolvedOptions().timeZone\n          }\n        };\n        const response = await window.gapi.client.calendar.events.insert({\n          'calendarId': 'primary',\n          'resource': event\n        });\n\n        // Update outfit schedule with Google Calendar event ID\n        await supabase.from('outfit_schedules').update({\n          google_event_id: response.result.id\n        }).eq('id', scheduleData.id);\n      }\n      setShowScheduleModal(false);\n      setSelectedOutfitForSchedule(null);\n      setScheduleDate('');\n      fetchScheduledOutfits();\n      if (isGoogleCalendarConnected) {\n        fetchCalendarEvents();\n      }\n    } catch (error) {\n      console.error('Error scheduling outfit:', error);\n      alert('Error scheduling outfit. Please try again.');\n    }\n  };\n  const handleDeleteSchedule = async scheduleId => {\n    if (window.confirm('Are you sure you want to remove this outfit from your schedule?')) {\n      try {\n        const {\n          error\n        } = await supabase.from('outfit_schedules').delete().eq('id', scheduleId);\n        if (error) throw error;\n        fetchScheduledOutfits();\n      } catch (error) {\n        console.error('Error deleting scheduled outfit:', error);\n        alert('Error removing outfit from schedule');\n      }\n    }\n  };\n  const getSortedItems = items => {\n    return [...items].sort((a, b) => {\n      const indexA = categoryOrder.indexOf(a.category);\n      const indexB = categoryOrder.indexOf(b.category);\n      return indexA - indexB;\n    });\n  };\n  const formatDate = dateString => {\n    const date = new Date(dateString);\n    return date.toLocaleDateString('en-US', {\n      weekday: 'long',\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric'\n    });\n  };\n  const checkUserSettingsTable = async () => {\n    try {\n      console.log('Checking if user_settings table exists...');\n\n      // Try to query the table to see if it exists\n      const {\n        error\n      } = await supabase.from('user_settings').select('id').limit(1);\n      if (error) {\n        console.error('Error checking user_settings table:', error);\n\n        // If the error indicates the table doesn't exist, create it\n        if (error.code === '42P01') {\n          // PostgreSQL error code for undefined_table\n          console.log('user_settings table does not exist. Please run the SQL in the user_settings.sql file in your Supabase SQL editor.');\n          alert('The Google Calendar integration requires the user_settings table to be created in your Supabase database. Please run the SQL in the user_settings.sql file in your Supabase SQL editor.');\n        }\n      } else {\n        console.log('user_settings table exists');\n      }\n    } catch (error) {\n      console.error('Error in checkUserSettingsTable:', error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"dashboard\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"dashboard-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header-content\",\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"dashboard-title\",\n          children: \"Outfit Planner\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 638,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 637,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => navigate('/'),\n        className: \"button button-secondary\",\n        children: \"Back to Dashboard\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 640,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 636,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"outfit-planner-tabs\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: `tab-button ${activeTab === 'planner' ? 'active' : ''}`,\n        onClick: () => setActiveTab('planner'),\n        children: \"Outfit Planner\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 646,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `tab-button ${activeTab === 'calendar' ? 'active' : ''}`,\n        onClick: () => setActiveTab('calendar'),\n        children: \"Outfit Calendar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 652,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 645,\n      columnNumber: 7\n    }, this), activeTab === 'planner' ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"outfit-planner-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"outfit-preview-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"section-title\",\n          children: \"Current Outfit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 663,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"outfit-preview-grid\",\n          children: getSortedItems(selectedItems).map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"outfit-preview-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: item.image_url,\n              alt: item.name || item.category,\n              className: \"outfit-preview-image\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 667,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"outfit-preview-details\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                children: item.name || item.category\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 673,\n                columnNumber: 21\n              }, this), item.brand && /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"item-brand\",\n                children: item.brand\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 674,\n                columnNumber: 36\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 672,\n              columnNumber: 19\n            }, this)]\n          }, item.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 666,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 664,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"outfit-actions\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleRandomize,\n            className: \"button\",\n            children: \"Randomize Outfit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 680,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setShowSaveModal(true),\n            disabled: selectedItems.length === 0,\n            className: \"button\",\n            children: \"Save Outfit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 683,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 679,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 662,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"clothing-selection-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"section-title\",\n          children: \"Select Items\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 694,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"category-filters\",\n          children: /*#__PURE__*/_jsxDEV(\"select\", {\n            value: selectedCategory,\n            onChange: e => setSelectedCategory(e.target.value),\n            className: \"form-select\",\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"All Categories\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 701,\n              columnNumber: 17\n            }, this), categories.map(category => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: category,\n              children: category\n            }, category, false, {\n              fileName: _jsxFileName,\n              lineNumber: 703,\n              columnNumber: 19\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 696,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 695,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"clothing-selection-grid\",\n          children: clothingItems.filter(item => !selectedCategory || item.category === selectedCategory).map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `clothing-selection-item ${selectedItems.some(i => i.id === item.id) ? 'selected' : ''}`,\n            onClick: () => handleItemSelect(item),\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: item.image_url,\n              alt: item.name || item.category,\n              className: \"clothing-selection-image\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 718,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"clothing-selection-details\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                children: item.name || item.category\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 724,\n                columnNumber: 23\n              }, this), item.brand && /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"item-brand\",\n                children: item.brand\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 725,\n                columnNumber: 38\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 723,\n              columnNumber: 21\n            }, this)]\n          }, item.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 711,\n            columnNumber: 19\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 707,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 693,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"saved-outfits-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"section-title\",\n          children: \"Saved Outfits\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 733,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"saved-outfits-grid\",\n          children: savedOutfits.map(outfit => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"saved-outfit-card\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: outfit.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 737,\n              columnNumber: 19\n            }, this), outfit.occasion && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"outfit-occasion\",\n              children: outfit.occasion\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 738,\n              columnNumber: 39\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"saved-outfit-preview\",\n              children: getSortedItems(outfit.items).map(item => /*#__PURE__*/_jsxDEV(\"img\", {\n                src: item.image_url,\n                alt: item.name || item.category,\n                className: \"saved-outfit-item-image\"\n              }, item.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 741,\n                columnNumber: 23\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 739,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"saved-outfit-actions\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => {\n                  setSelectedItems(outfit.items);\n                  window.scrollTo({\n                    top: 0,\n                    behavior: 'smooth'\n                  });\n                },\n                className: \"button button-secondary\",\n                children: \"Load\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 750,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => {\n                  setSelectedOutfitForSchedule(outfit);\n                  setShowScheduleModal(true);\n                },\n                className: \"button button-secondary\",\n                children: \"Schedule\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 759,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleDeleteOutfit(outfit.id),\n                className: \"button button-danger\",\n                children: \"Delete\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 768,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 749,\n              columnNumber: 19\n            }, this)]\n          }, outfit.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 736,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 734,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 732,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 661,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"outfit-calendar-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"calendar-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"section-title\",\n          children: \"Outfit Calendar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 783,\n          columnNumber: 13\n        }, this), !isGoogleCalendarConnected && /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: connectGoogleCalendar,\n          className: \"button button-secondary\",\n          children: \"Connect Google Calendar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 785,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"calendar-view-toggle\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: `button button-secondary ${!showCalendarView ? 'active' : ''}`,\n            onClick: () => setShowCalendarView(false),\n            children: \"List View\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 790,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: `button button-secondary ${showCalendarView ? 'active' : ''}`,\n            onClick: () => setShowCalendarView(true),\n            children: \"Calendar View\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 796,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 789,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 782,\n        columnNumber: 11\n      }, this), showCalendarView ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"calendar-view\",\n        children: !isGoogleCalendarConnected ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"no-items-message\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Please connect your Google Calendar to view your scheduled outfits in calendar view.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 809,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: connectGoogleCalendar,\n            className: \"button button-secondary\",\n            children: \"Connect Google Calendar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 810,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 808,\n          columnNumber: 17\n        }, this) : calendarEvents.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"no-items-message\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"No upcoming events found in your Google Calendar.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 816,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Schedule an outfit from the Outfit Planner tab to see it here.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 817,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 815,\n          columnNumber: 17\n        }, this) : calendarEvents.map(event => {\n          const outfitSchedule = scheduledOutfits.find(schedule => schedule.google_event_id === event.id);\n          const outfit = outfitSchedule === null || outfitSchedule === void 0 ? void 0 : outfitSchedule.outfit;\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"calendar-event\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"event-time\",\n              children: new Date(event.start.dateTime).toLocaleTimeString([], {\n                hour: '2-digit',\n                minute: '2-digit'\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 828,\n              columnNumber: 23\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"event-content\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                children: event.summary\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 835,\n                columnNumber: 25\n              }, this), outfit && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"event-outfit-preview\",\n                children: getSortedItems(outfit.items).map(item => /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: item.image_url,\n                  alt: item.name || item.category,\n                  className: \"event-outfit-item-image\"\n                }, item.id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 839,\n                  columnNumber: 31\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 837,\n                columnNumber: 27\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 834,\n              columnNumber: 23\n            }, this)]\n          }, event.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 827,\n            columnNumber: 21\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 806,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"scheduled-outfits-list\",\n        children: scheduledOutfits.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"no-items-message\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"No outfits scheduled yet. Schedule an outfit from the Outfit Planner tab.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 858,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"setup-instructions\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Database Setup Required\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 860,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"To use the outfit scheduling feature, you need to create the \", /*#__PURE__*/_jsxDEV(\"code\", {\n                children: \"outfit_schedules\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 861,\n                columnNumber: 85\n              }, this), \" table in your Supabase database.\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 861,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"ol\", {\n              children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                children: \"Go to your Supabase dashboard\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 863,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                children: \"Open the SQL Editor\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 864,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                children: [\"Copy and paste the SQL from the \", /*#__PURE__*/_jsxDEV(\"code\", {\n                  children: \"outfit_schedules.sql\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 865,\n                  columnNumber: 59\n                }, this), \" file\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 865,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                children: \"Run the SQL to create the table and set up the necessary policies\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 866,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 862,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"After setting up the database, refresh this page and try scheduling an outfit again.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 868,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 859,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 857,\n          columnNumber: 17\n        }, this) : scheduledOutfits.map(schedule => {\n          var _schedule$outfit, _schedule$outfit2, _schedule$outfit3;\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"scheduled-outfit-card\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"scheduled-outfit-date\",\n              children: /*#__PURE__*/_jsxDEV(\"h3\", {\n                children: formatDate(schedule.date)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 875,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 874,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"scheduled-outfit-details\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: (_schedule$outfit = schedule.outfit) === null || _schedule$outfit === void 0 ? void 0 : _schedule$outfit.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 878,\n                columnNumber: 23\n              }, this), ((_schedule$outfit2 = schedule.outfit) === null || _schedule$outfit2 === void 0 ? void 0 : _schedule$outfit2.occasion) && /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"outfit-occasion\",\n                children: schedule.outfit.occasion\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 880,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"scheduled-outfit-preview\",\n                children: ((_schedule$outfit3 = schedule.outfit) === null || _schedule$outfit3 === void 0 ? void 0 : _schedule$outfit3.items) && getSortedItems(schedule.outfit.items).map(item => /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: item.image_url,\n                  alt: item.name || item.category,\n                  className: \"scheduled-outfit-item-image\"\n                }, item.id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 884,\n                  columnNumber: 27\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 882,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 877,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"scheduled-outfit-actions\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleDeleteSchedule(schedule.id),\n                className: \"button button-danger\",\n                children: \"Remove\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 894,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 893,\n              columnNumber: 21\n            }, this)]\n          }, schedule.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 873,\n            columnNumber: 19\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 855,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 781,\n      columnNumber: 9\n    }, this), showSaveModal && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-overlay\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"section-title\",\n          children: \"Save Outfit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 913,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Outfit Name:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 915,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: outfitName,\n            onChange: e => setOutfitName(e.target.value),\n            placeholder: \"Enter a name for your outfit\",\n            className: \"form-input\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 916,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 914,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Occasion (optional):\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 925,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: outfitOccasion,\n            onChange: e => setOutfitOccasion(e.target.value),\n            placeholder: \"Enter an occasion\",\n            className: \"form-input\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 926,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 924,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-actions\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              setShowSaveModal(false);\n              setOutfitName('');\n              setOutfitOccasion('');\n            },\n            className: \"button button-secondary\",\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 935,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleSaveOutfit,\n            disabled: !outfitName,\n            className: \"button\",\n            children: \"Save\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 945,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 934,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 912,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 911,\n      columnNumber: 9\n    }, this), showScheduleModal && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-overlay\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"section-title\",\n          children: \"Schedule Outfit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 961,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Select Date:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 963,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"date\",\n            value: scheduleDate,\n            onChange: e => setScheduleDate(e.target.value),\n            className: \"form-input\",\n            min: new Date().toISOString().split('T')[0]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 964,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 962,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"scheduled-outfit-preview\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: selectedOutfitForSchedule === null || selectedOutfitForSchedule === void 0 ? void 0 : selectedOutfitForSchedule.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 973,\n            columnNumber: 15\n          }, this), (selectedOutfitForSchedule === null || selectedOutfitForSchedule === void 0 ? void 0 : selectedOutfitForSchedule.occasion) && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"outfit-occasion\",\n            children: selectedOutfitForSchedule.occasion\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 975,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"outfit-preview-grid\",\n            children: (selectedOutfitForSchedule === null || selectedOutfitForSchedule === void 0 ? void 0 : selectedOutfitForSchedule.items) && getSortedItems(selectedOutfitForSchedule.items).map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"outfit-preview-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: item.image_url,\n                alt: item.name || item.category,\n                className: \"outfit-preview-image\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 980,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"outfit-preview-details\",\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  children: item.name || item.category\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 986,\n                  columnNumber: 23\n                }, this), item.brand && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"item-brand\",\n                  children: item.brand\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 987,\n                  columnNumber: 38\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 985,\n                columnNumber: 21\n              }, this)]\n            }, item.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 979,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 977,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 972,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-actions\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              setShowScheduleModal(false);\n              setSelectedOutfitForSchedule(null);\n              setScheduleDate('');\n            },\n            className: \"button button-secondary\",\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 994,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleScheduleOutfit,\n            disabled: !scheduleDate,\n            className: \"button\",\n            children: \"Schedule\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1004,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 993,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 960,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 959,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 635,\n    columnNumber: 5\n  }, this);\n};\n_s(OutfitPlanner, \"4awb9sR/BrZV0vm2arYiuv+l4B4=\", false, function () {\n  return [useNavigate];\n});\n_c = OutfitPlanner;\nexport default OutfitPlanner;\nvar _c;\n$RefreshReg$(_c, \"OutfitPlanner\");","map":{"version":3,"names":["React","useState","useEffect","supabase","useNavigate","jsxDEV","_jsxDEV","OutfitPlanner","_s","navigate","clothingItems","setClothingItems","selectedItems","setSelectedItems","savedOutfits","setSavedOutfits","showSaveModal","setShowSaveModal","outfitName","setOutfitName","outfitOccasion","setOutfitOccasion","selectedCategory","setSelectedCategory","scheduledOutfits","setScheduledOutfits","showScheduleModal","setShowScheduleModal","selectedOutfitForSchedule","setSelectedOutfitForSchedule","scheduleDate","setScheduleDate","isGoogleCalendarConnected","setIsGoogleCalendarConnected","activeTab","setActiveTab","calendarEvents","setCalendarEvents","showCalendarView","setShowCalendarView","categories","categoryOrder","fetchClothingItems","fetchSavedOutfits","checkOutfitSchedulesTable","fetchScheduledOutfits","checkGoogleCalendarConnection","checkUserSettingsTable","data","user","auth","getUser","Error","error","from","select","eq","id","console","order","ascending","outfitsWithItems","Promise","all","map","outfit","items","in","log","schedules","schedulesError","outfitIds","schedule","outfit_id","outfits","outfitsError","transformedSchedules","find","limit","code","createOutfitSchedulesTable","alert","handleRandomize","newSelectedItems","usedCategories","Set","shuffledItems","sort","Math","random","item","has","category","push","add","handleItemSelect","filteredItems","filter","i","handleSaveOutfit","length","user_id","name","occasion","insert","message","handleDeleteOutfit","outfitId","window","confirm","delete","settings","single","google_calendar_connected","fetchCalendarEvents","google_access_token","response","gapi","client","calendar","events","list","Date","toISOString","result","scheduledOutfitsWithEvents","matchingEvent","event","_event$description","description","includes","google_event_id","update","connectGoogleCalendar","apiKey","process","env","REACT_APP_GOOGLE_API_KEY","clientId","REACT_APP_GOOGLE_CLIENT_ID","resolve","reject","load","callback","onerror","loadError","init","discoveryDocs","scope","initError","googleUser","auth2","getAuthInstance","signIn","settingsError","upsert","getAuthResponse","access_token","signInError","handleScheduleOutfit","scheduleData","scheduleError","date","Intl","DateTimeFormat","resolvedOptions","timeZone","handleDeleteSchedule","scheduleId","getSortedItems","a","b","indexA","indexOf","indexB","formatDate","dateString","toLocaleDateString","weekday","year","month","day","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","src","image_url","alt","brand","disabled","value","onChange","e","target","some","scrollTo","top","behavior","outfitSchedule","start","dateTime","toLocaleTimeString","hour","minute","summary","_schedule$outfit","_schedule$outfit2","_schedule$outfit3","type","placeholder","min","split","_c","$RefreshReg$"],"sources":["/Users/adlyazim/Documents/GitHub/ENTI674-Team3-FinalProject/client/src/pages/OutfitPlanner.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { supabase } from '../utils/supabaseClient';\nimport { useNavigate } from 'react-router-dom';\nimport '../styles/main.css';\n\ninterface ClothingItem {\n  id: string;\n  image_url: string;\n  name: string | null;\n  brand: string | null;\n  category: string;\n  color: string;\n  occasion: string;\n}\n\ninterface Outfit {\n  id: string;\n  name: string;\n  occasion: string | null;\n  items: ClothingItem[];\n  created_at: string;\n}\n\ninterface OutfitSchedule {\n  id: string;\n  outfit_id: string;\n  date: string;\n  user_id: string;\n  created_at: string;\n  outfit?: Outfit;\n  google_event_id?: string;\n}\n\nconst OutfitPlanner: React.FC = () => {\n  const navigate = useNavigate();\n  const [clothingItems, setClothingItems] = useState<ClothingItem[]>([]);\n  const [selectedItems, setSelectedItems] = useState<ClothingItem[]>([]);\n  const [savedOutfits, setSavedOutfits] = useState<Outfit[]>([]);\n  const [showSaveModal, setShowSaveModal] = useState(false);\n  const [outfitName, setOutfitName] = useState('');\n  const [outfitOccasion, setOutfitOccasion] = useState('');\n  const [selectedCategory, setSelectedCategory] = useState<string>('');\n  const [scheduledOutfits, setScheduledOutfits] = useState<OutfitSchedule[]>([]);\n  const [showScheduleModal, setShowScheduleModal] = useState(false);\n  const [selectedOutfitForSchedule, setSelectedOutfitForSchedule] = useState<Outfit | null>(null);\n  const [scheduleDate, setScheduleDate] = useState('');\n  const [isGoogleCalendarConnected, setIsGoogleCalendarConnected] = useState(false);\n  const [activeTab, setActiveTab] = useState<'planner' | 'calendar'>('planner');\n  const [calendarEvents, setCalendarEvents] = useState<GoogleCalendarEvent[]>([]);\n  const [showCalendarView, setShowCalendarView] = useState(false);\n\n  const categories = [\n    'Jacket',\n    'Shirt',\n    'T-Shirt',\n    'Sweater',\n    'Dress',\n    'Skirt',\n    'Pants',\n    'Shorts',\n    'Jeans',\n    'Shoes',\n    'Accessories',\n  ];\n\n  const categoryOrder = [\n    'Headwear',\n    'Jacket',\n    'Shirt',\n    'T-Shirt',\n    'Sweater',\n    'Dress',\n    'Skirt',\n    'Pants',\n    'Shorts',\n    'Jeans',\n    'Shoes',\n    'Accessories'\n  ];\n\n  useEffect(() => {\n    fetchClothingItems();\n    fetchSavedOutfits();\n    checkOutfitSchedulesTable();\n    fetchScheduledOutfits();\n    checkGoogleCalendarConnection();\n    checkUserSettingsTable();\n  }, []);\n\n  const fetchClothingItems = async () => {\n    try {\n      // Get the current user's ID\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) {\n        throw new Error('No authenticated user found');\n      }\n\n      const { data, error } = await supabase\n        .from('clothing_items')\n        .select('*')\n        .eq('user_id', user.id);\n\n      if (error) throw error;\n      if (data) setClothingItems(data);\n    } catch (error) {\n      console.error('Error fetching clothing items:', error);\n    }\n  };\n\n  const fetchSavedOutfits = async () => {\n    try {\n      // Get the current user's ID\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) {\n        throw new Error('No authenticated user found');\n      }\n\n      const { data, error } = await supabase\n        .from('outfits')\n        .select('*')\n        .eq('user_id', user.id)\n        .order('created_at', { ascending: false });\n\n      if (error) throw error;\n      if (data) {\n        // Fetch the actual clothing items for each outfit\n        const outfitsWithItems = await Promise.all(\n          data.map(async (outfit) => {\n            const { data: items } = await supabase\n              .from('clothing_items')\n              .select('*')\n              .in('id', outfit.items);\n            return {\n              ...outfit,\n              items: items || [],\n            };\n          })\n        );\n        setSavedOutfits(outfitsWithItems);\n      }\n    } catch (error) {\n      console.error('Error fetching saved outfits:', error);\n    }\n  };\n\n  const fetchScheduledOutfits = async () => {\n    try {\n      console.log('Fetching scheduled outfits...');\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) {\n        console.log('No authenticated user found');\n        return;\n      }\n      console.log('User ID:', user.id);\n\n      // First, fetch the scheduled outfits\n      const { data: schedules, error: schedulesError } = await supabase\n        .from('outfit_schedules')\n        .select('*')\n        .eq('user_id', user.id)\n        .order('date', { ascending: true });\n\n      if (schedulesError) {\n        console.error('Error fetching schedules:', schedulesError);\n        throw schedulesError;\n      }\n      \n      console.log('Fetched schedules:', schedules);\n      \n      if (schedules) {\n        // Then, fetch the outfits for these schedules\n        const outfitIds = schedules.map(schedule => schedule.outfit_id);\n        console.log('Outfit IDs to fetch:', outfitIds);\n        \n        // First fetch the outfits\n        const { data: outfits, error: outfitsError } = await supabase\n          .from('outfits')\n          .select('*')\n          .in('id', outfitIds);\n\n        if (outfitsError) {\n          console.error('Error fetching outfits:', outfitsError);\n          throw outfitsError;\n        }\n\n        console.log('Fetched outfits:', outfits);\n\n        // Then fetch the clothing items for each outfit\n        const outfitsWithItems = await Promise.all(\n          outfits.map(async (outfit) => {\n            const { data: items } = await supabase\n              .from('clothing_items')\n              .select('*')\n              .in('id', outfit.items);\n            return {\n              ...outfit,\n              items: items || [],\n            };\n          })\n        );\n\n        // Combine the data\n        const transformedSchedules = schedules.map(schedule => ({\n          ...schedule,\n          outfit: outfitsWithItems.find(outfit => outfit.id === schedule.outfit_id)\n        }));\n\n        console.log('Transformed schedules:', transformedSchedules);\n        setScheduledOutfits(transformedSchedules);\n      }\n    } catch (error) {\n      console.error('Error in fetchScheduledOutfits:', error);\n    }\n  };\n\n  const checkOutfitSchedulesTable = async () => {\n    try {\n      // Try to query the table to see if it exists\n      const { error } = await supabase\n        .from('outfit_schedules')\n        .select('id')\n        .limit(1);\n      \n      if (error) {\n        console.error('Error checking outfit_schedules table:', error);\n        \n        // If the error indicates the table doesn't exist, create it\n        if (error.code === '42P01') { // PostgreSQL error code for undefined_table\n          console.log('Creating outfit_schedules table...');\n          await createOutfitSchedulesTable();\n        }\n      } else {\n        console.log('outfit_schedules table exists');\n      }\n    } catch (error) {\n      console.error('Error in checkOutfitSchedulesTable:', error);\n    }\n  };\n\n  const createOutfitSchedulesTable = async () => {\n    try {\n      // This is a simplified approach - in a real app, you'd use migrations\n      // or have the table created by your backend\n      console.log('This feature requires the outfit_schedules table to be created in Supabase.');\n      console.log('Please run the SQL in the outfit_schedules.sql file in your Supabase SQL editor.');\n      \n      // Show a more user-friendly message\n      alert('The outfit scheduling feature requires database setup. Please contact the administrator.');\n    } catch (error) {\n      console.error('Error creating outfit_schedules table:', error);\n    }\n  };\n\n  const handleRandomize = () => {\n    const newSelectedItems: ClothingItem[] = [];\n    const usedCategories = new Set<string>();\n\n    // Shuffle the clothing items\n    const shuffledItems = [...clothingItems].sort(() => Math.random() - 0.5);\n\n    // Select one item from each category\n    for (const item of shuffledItems) {\n      if (!usedCategories.has(item.category)) {\n        newSelectedItems.push(item);\n        usedCategories.add(item.category);\n      }\n    }\n\n    setSelectedItems(newSelectedItems);\n  };\n\n  const handleItemSelect = (item: ClothingItem) => {\n    // Remove any existing item of the same category\n    const filteredItems = selectedItems.filter(i => i.category !== item.category);\n    setSelectedItems([...filteredItems, item]);\n  };\n\n  const handleSaveOutfit = async () => {\n    if (!outfitName || selectedItems.length === 0) {\n      alert('Please provide a name for the outfit and select at least one item');\n      return;\n    }\n\n    try {\n      // Get the current user's ID\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) {\n        throw new Error('No authenticated user found');\n      }\n\n      console.log('Saving outfit with data:', {\n        user_id: user.id,\n        name: outfitName,\n        occasion: outfitOccasion || null,\n        items: selectedItems.map(item => item.id)\n      });\n\n      const { data, error } = await supabase\n        .from('outfits')\n        .insert([\n          {\n            user_id: user.id,\n            name: outfitName,\n            occasion: outfitOccasion || null,\n            items: selectedItems.map(item => item.id),\n          },\n        ])\n        .select();\n\n      if (error) {\n        console.error('Supabase error details:', error);\n        throw error;\n      }\n\n      console.log('Successfully saved outfit:', data);\n\n      setShowSaveModal(false);\n      setOutfitName('');\n      setOutfitOccasion('');\n      fetchSavedOutfits();\n    } catch (error) {\n      console.error('Error saving outfit:', error);\n      if (error instanceof Error) {\n        alert(`Error saving outfit: ${error.message}`);\n      } else {\n        alert('Error saving outfit. Please check the console for details.');\n      }\n    }\n  };\n\n  const handleDeleteOutfit = async (outfitId: string) => {\n    if (window.confirm('Are you sure you want to delete this outfit?')) {\n      try {\n        const { error } = await supabase\n          .from('outfits')\n          .delete()\n          .eq('id', outfitId);\n\n        if (error) throw error;\n        fetchSavedOutfits();\n      } catch (error) {\n        console.error('Error deleting outfit:', error);\n        alert('Error deleting outfit');\n      }\n    }\n  };\n\n  const checkGoogleCalendarConnection = async () => {\n    try {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) return;\n\n      // Check if user has Google Calendar connected\n      const { data: settings } = await supabase\n        .from('user_settings')\n        .select('google_calendar_connected')\n        .eq('user_id', user.id)\n        .single();\n\n      setIsGoogleCalendarConnected(settings?.google_calendar_connected || false);\n    } catch (error) {\n      console.error('Error checking Google Calendar connection:', error);\n    }\n  };\n\n  const fetchCalendarEvents = async () => {\n    try {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) return;\n\n      // Get user's Google Calendar settings\n      const { data: settings } = await supabase\n        .from('user_settings')\n        .select('google_access_token')\n        .eq('user_id', user.id)\n        .single();\n\n      if (!settings?.google_access_token) {\n        console.log('No Google access token found');\n        setCalendarEvents([]);\n        return;\n      }\n\n      // Fetch events from Google Calendar\n      const response = await window.gapi.client.calendar.events.list({\n        'calendarId': 'primary',\n        'timeMin': new Date().toISOString(),\n        'showDeleted': false,\n        'singleEvents': true,\n        'maxResults': 10,\n        'orderBy': 'startTime',\n      });\n\n      const events = response.result.items || [];\n      console.log('Fetched calendar events:', events);\n      setCalendarEvents(events);\n\n      // Update outfit schedules with Google Calendar event IDs\n      const scheduledOutfitsWithEvents = await Promise.all(\n        scheduledOutfits.map(async (schedule) => {\n          const matchingEvent = events.find((event: GoogleCalendarEvent) => \n            event.description?.includes(`outfit_id:${schedule.outfit_id}`)\n          );\n\n          if (matchingEvent && !schedule.google_event_id) {\n            await supabase\n              .from('outfit_schedules')\n              .update({ google_event_id: matchingEvent.id })\n              .eq('id', schedule.id);\n          }\n\n          return {\n            ...schedule,\n            google_event_id: matchingEvent?.id || schedule.google_event_id,\n          };\n        })\n      );\n\n      setScheduledOutfits(scheduledOutfitsWithEvents);\n    } catch (error) {\n      console.error('Error fetching calendar events:', error);\n      setCalendarEvents([]);\n    }\n  };\n\n  const connectGoogleCalendar = async () => {\n    try {\n      console.log('Starting Google Calendar connection process...');\n      \n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) throw new Error('No authenticated user found');\n      console.log('User authenticated:', user.id);\n\n      // Check if gapi is loaded\n      if (typeof window.gapi === 'undefined') {\n        console.error('Google API (gapi) is not loaded. Make sure the script is included in index.html');\n        throw new Error('Google API not loaded. Please refresh the page and try again.');\n      }\n\n      console.log('Initializing Google Calendar API with:', {\n        apiKey: process.env.REACT_APP_GOOGLE_API_KEY ? 'API key exists' : 'API key missing',\n        clientId: process.env.REACT_APP_GOOGLE_CLIENT_ID ? 'Client ID exists' : 'Client ID missing'\n      });\n\n      // Wait for the Google API to be fully loaded\n      await new Promise((resolve, reject) => {\n        try {\n          (window.gapi as any).load('client:auth2', {\n            callback: resolve,\n            onerror: reject\n          });\n        } catch (loadError) {\n          console.error('Error loading Google API:', loadError);\n          reject(loadError);\n        }\n      });\n      console.log('Google API loaded successfully');\n\n      // Initialize Google Calendar API\n      try {\n        await window.gapi.client.init({\n          apiKey: process.env.REACT_APP_GOOGLE_API_KEY as string,\n          clientId: process.env.REACT_APP_GOOGLE_CLIENT_ID as string,\n          discoveryDocs: ['https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest'],\n          scope: 'https://www.googleapis.com/auth/calendar.events',\n        });\n        console.log('Google API initialized successfully');\n      } catch (initError) {\n        console.error('Error initializing Google API:', initError);\n        throw new Error(`Failed to initialize Google API: ${initError instanceof Error ? initError.message : 'Unknown error'}`);\n      }\n\n      // Sign in with Google\n      try {\n        console.log('Attempting to sign in with Google...');\n        const googleUser = await window.gapi.auth2.getAuthInstance().signIn();\n        console.log('Google sign-in successful');\n        \n        // Update user settings in Supabase\n        const { error: settingsError } = await supabase\n          .from('user_settings')\n          .upsert({\n            user_id: user.id,\n            google_calendar_connected: true,\n            google_access_token: googleUser.getAuthResponse().access_token,\n          });\n        \n        if (settingsError) {\n          console.error('Error updating user settings:', settingsError);\n          throw new Error(`Failed to update user settings: ${settingsError.message}`);\n        }\n        console.log('User settings updated successfully');\n\n        setIsGoogleCalendarConnected(true);\n        fetchCalendarEvents();\n      } catch (signInError) {\n        console.error('Error during Google sign-in:', signInError);\n        throw new Error(`Google sign-in failed: ${signInError instanceof Error ? signInError.message : 'Unknown error'}`);\n      }\n    } catch (error) {\n      console.error('Error connecting to Google Calendar:', error);\n      alert(`Failed to connect to Google Calendar: ${error instanceof Error ? error.message : 'Unknown error'}`);\n    }\n  };\n\n  const handleScheduleOutfit = async () => {\n    if (!selectedOutfitForSchedule || !scheduleDate) {\n      alert('Please select an outfit and a date');\n      return;\n    }\n\n    try {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) {\n        throw new Error('No authenticated user found');\n      }\n\n      // Create outfit schedule in Supabase\n      const { data: scheduleData, error: scheduleError } = await supabase\n        .from('outfit_schedules')\n        .insert([\n          {\n            user_id: user.id,\n            outfit_id: selectedOutfitForSchedule.id,\n            date: scheduleDate,\n          },\n        ])\n        .select()\n        .single();\n\n      if (scheduleError) throw scheduleError;\n\n      // If Google Calendar is connected, create calendar event\n      if (isGoogleCalendarConnected) {\n        const event = {\n          'summary': `Outfit: ${selectedOutfitForSchedule.name}`,\n          'description': `outfit_id:${selectedOutfitForSchedule.id}`,\n          'start': {\n            'dateTime': `${scheduleDate}T09:00:00`,\n            'timeZone': Intl.DateTimeFormat().resolvedOptions().timeZone,\n          },\n          'end': {\n            'dateTime': `${scheduleDate}T17:00:00`,\n            'timeZone': Intl.DateTimeFormat().resolvedOptions().timeZone,\n          },\n        };\n\n        const response = await window.gapi.client.calendar.events.insert({\n          'calendarId': 'primary',\n          'resource': event,\n        });\n\n        // Update outfit schedule with Google Calendar event ID\n        await supabase\n          .from('outfit_schedules')\n          .update({ google_event_id: response.result.id })\n          .eq('id', scheduleData.id);\n      }\n\n      setShowScheduleModal(false);\n      setSelectedOutfitForSchedule(null);\n      setScheduleDate('');\n      fetchScheduledOutfits();\n      if (isGoogleCalendarConnected) {\n        fetchCalendarEvents();\n      }\n    } catch (error) {\n      console.error('Error scheduling outfit:', error);\n      alert('Error scheduling outfit. Please try again.');\n    }\n  };\n\n  const handleDeleteSchedule = async (scheduleId: string) => {\n    if (window.confirm('Are you sure you want to remove this outfit from your schedule?')) {\n      try {\n        const { error } = await supabase\n          .from('outfit_schedules')\n          .delete()\n          .eq('id', scheduleId);\n\n        if (error) throw error;\n        fetchScheduledOutfits();\n      } catch (error) {\n        console.error('Error deleting scheduled outfit:', error);\n        alert('Error removing outfit from schedule');\n      }\n    }\n  };\n\n  const getSortedItems = (items: ClothingItem[]) => {\n    return [...items].sort((a, b) => {\n      const indexA = categoryOrder.indexOf(a.category);\n      const indexB = categoryOrder.indexOf(b.category);\n      return indexA - indexB;\n    });\n  };\n\n  const formatDate = (dateString: string) => {\n    const date = new Date(dateString);\n    return date.toLocaleDateString('en-US', { \n      weekday: 'long', \n      year: 'numeric', \n      month: 'long', \n      day: 'numeric' \n    });\n  };\n\n  const checkUserSettingsTable = async () => {\n    try {\n      console.log('Checking if user_settings table exists...');\n      \n      // Try to query the table to see if it exists\n      const { error } = await supabase\n        .from('user_settings')\n        .select('id')\n        .limit(1);\n      \n      if (error) {\n        console.error('Error checking user_settings table:', error);\n        \n        // If the error indicates the table doesn't exist, create it\n        if (error.code === '42P01') { // PostgreSQL error code for undefined_table\n          console.log('user_settings table does not exist. Please run the SQL in the user_settings.sql file in your Supabase SQL editor.');\n          alert('The Google Calendar integration requires the user_settings table to be created in your Supabase database. Please run the SQL in the user_settings.sql file in your Supabase SQL editor.');\n        }\n      } else {\n        console.log('user_settings table exists');\n      }\n    } catch (error) {\n      console.error('Error in checkUserSettingsTable:', error);\n    }\n  };\n\n  return (\n    <div className=\"dashboard\">\n      <div className=\"dashboard-header\">\n        <div className=\"header-content\">\n          <h1 className=\"dashboard-title\">Outfit Planner</h1>\n        </div>\n        <button onClick={() => navigate('/')} className=\"button button-secondary\">\n          Back to Dashboard\n        </button>\n      </div>\n\n      <div className=\"outfit-planner-tabs\">\n        <button \n          className={`tab-button ${activeTab === 'planner' ? 'active' : ''}`}\n          onClick={() => setActiveTab('planner')}\n        >\n          Outfit Planner\n        </button>\n        <button \n          className={`tab-button ${activeTab === 'calendar' ? 'active' : ''}`}\n          onClick={() => setActiveTab('calendar')}\n        >\n          Outfit Calendar\n        </button>\n      </div>\n\n      {activeTab === 'planner' ? (\n        <div className=\"outfit-planner-container\">\n          <div className=\"outfit-preview-section\">\n            <h2 className=\"section-title\">Current Outfit</h2>\n            <div className=\"outfit-preview-grid\">\n              {getSortedItems(selectedItems).map((item) => (\n                <div key={item.id} className=\"outfit-preview-item\">\n                  <img\n                    src={item.image_url}\n                    alt={item.name || item.category}\n                    className=\"outfit-preview-image\"\n                  />\n                  <div className=\"outfit-preview-details\">\n                    <h3>{item.name || item.category}</h3>\n                    {item.brand && <p className=\"item-brand\">{item.brand}</p>}\n                  </div>\n                </div>\n              ))}\n            </div>\n            <div className=\"outfit-actions\">\n              <button onClick={handleRandomize} className=\"button\">\n                Randomize Outfit\n              </button>\n              <button\n                onClick={() => setShowSaveModal(true)}\n                disabled={selectedItems.length === 0}\n                className=\"button\"\n              >\n                Save Outfit\n              </button>\n            </div>\n          </div>\n\n          <div className=\"clothing-selection-section\">\n            <h2 className=\"section-title\">Select Items</h2>\n            <div className=\"category-filters\">\n              <select\n                value={selectedCategory}\n                onChange={(e) => setSelectedCategory(e.target.value)}\n                className=\"form-select\"\n              >\n                <option value=\"\">All Categories</option>\n                {categories.map(category => (\n                  <option key={category} value={category}>{category}</option>\n                ))}\n              </select>\n            </div>\n            <div className=\"clothing-selection-grid\">\n              {clothingItems\n                .filter(item => !selectedCategory || item.category === selectedCategory)\n                .map((item) => (\n                  <div\n                    key={item.id}\n                    className={`clothing-selection-item ${\n                      selectedItems.some(i => i.id === item.id) ? 'selected' : ''\n                    }`}\n                    onClick={() => handleItemSelect(item)}\n                  >\n                    <img\n                      src={item.image_url}\n                      alt={item.name || item.category}\n                      className=\"clothing-selection-image\"\n                    />\n                    <div className=\"clothing-selection-details\">\n                      <h3>{item.name || item.category}</h3>\n                      {item.brand && <p className=\"item-brand\">{item.brand}</p>}\n                    </div>\n                  </div>\n                ))}\n            </div>\n          </div>\n\n          <div className=\"saved-outfits-section\">\n            <h2 className=\"section-title\">Saved Outfits</h2>\n            <div className=\"saved-outfits-grid\">\n              {savedOutfits.map((outfit) => (\n                <div key={outfit.id} className=\"saved-outfit-card\">\n                  <h3>{outfit.name}</h3>\n                  {outfit.occasion && <p className=\"outfit-occasion\">{outfit.occasion}</p>}\n                  <div className=\"saved-outfit-preview\">\n                    {getSortedItems(outfit.items).map((item) => (\n                      <img\n                        key={item.id}\n                        src={item.image_url}\n                        alt={item.name || item.category}\n                        className=\"saved-outfit-item-image\"\n                      />\n                    ))}\n                  </div>\n                  <div className=\"saved-outfit-actions\">\n                    <button\n                      onClick={() => {\n                        setSelectedItems(outfit.items);\n                        window.scrollTo({ top: 0, behavior: 'smooth' });\n                      }}\n                      className=\"button button-secondary\"\n                    >\n                      Load\n                    </button>\n                    <button\n                      onClick={() => {\n                        setSelectedOutfitForSchedule(outfit);\n                        setShowScheduleModal(true);\n                      }}\n                      className=\"button button-secondary\"\n                    >\n                      Schedule\n                    </button>\n                    <button\n                      onClick={() => handleDeleteOutfit(outfit.id)}\n                      className=\"button button-danger\"\n                    >\n                      Delete\n                    </button>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        </div>\n      ) : (\n        <div className=\"outfit-calendar-container\">\n          <div className=\"calendar-header\">\n            <h2 className=\"section-title\">Outfit Calendar</h2>\n            {!isGoogleCalendarConnected && (\n              <button onClick={connectGoogleCalendar} className=\"button button-secondary\">\n                Connect Google Calendar\n              </button>\n            )}\n            <div className=\"calendar-view-toggle\">\n              <button \n                className={`button button-secondary ${!showCalendarView ? 'active' : ''}`}\n                onClick={() => setShowCalendarView(false)}\n              >\n                List View\n              </button>\n              <button \n                className={`button button-secondary ${showCalendarView ? 'active' : ''}`}\n                onClick={() => setShowCalendarView(true)}\n              >\n                Calendar View\n              </button>\n            </div>\n          </div>\n          \n          {showCalendarView ? (\n            <div className=\"calendar-view\">\n              {!isGoogleCalendarConnected ? (\n                <div className=\"no-items-message\">\n                  <p>Please connect your Google Calendar to view your scheduled outfits in calendar view.</p>\n                  <button onClick={connectGoogleCalendar} className=\"button button-secondary\">\n                    Connect Google Calendar\n                  </button>\n                </div>\n              ) : calendarEvents.length === 0 ? (\n                <div className=\"no-items-message\">\n                  <p>No upcoming events found in your Google Calendar.</p>\n                  <p>Schedule an outfit from the Outfit Planner tab to see it here.</p>\n                </div>\n              ) : (\n                calendarEvents.map((event) => {\n                  const outfitSchedule = scheduledOutfits.find(\n                    schedule => schedule.google_event_id === event.id\n                  );\n                  const outfit = outfitSchedule?.outfit;\n\n                  return (\n                    <div key={event.id} className=\"calendar-event\">\n                      <div className=\"event-time\">\n                        {new Date(event.start.dateTime).toLocaleTimeString([], { \n                          hour: '2-digit', \n                          minute: '2-digit' \n                        })}\n                      </div>\n                      <div className=\"event-content\">\n                        <h3>{event.summary}</h3>\n                        {outfit && (\n                          <div className=\"event-outfit-preview\">\n                            {getSortedItems(outfit.items).map((item) => (\n                              <img\n                                key={item.id}\n                                src={item.image_url}\n                                alt={item.name || item.category}\n                                className=\"event-outfit-item-image\"\n                              />\n                            ))}\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  );\n                })\n              )}\n            </div>\n          ) : (\n            <div className=\"scheduled-outfits-list\">\n              {scheduledOutfits.length === 0 ? (\n                <div className=\"no-items-message\">\n                  <p>No outfits scheduled yet. Schedule an outfit from the Outfit Planner tab.</p>\n                  <div className=\"setup-instructions\">\n                    <h3>Database Setup Required</h3>\n                    <p>To use the outfit scheduling feature, you need to create the <code>outfit_schedules</code> table in your Supabase database.</p>\n                    <ol>\n                      <li>Go to your Supabase dashboard</li>\n                      <li>Open the SQL Editor</li>\n                      <li>Copy and paste the SQL from the <code>outfit_schedules.sql</code> file</li>\n                      <li>Run the SQL to create the table and set up the necessary policies</li>\n                    </ol>\n                    <p>After setting up the database, refresh this page and try scheduling an outfit again.</p>\n                  </div>\n                </div>\n              ) : (\n                scheduledOutfits.map((schedule) => (\n                  <div key={schedule.id} className=\"scheduled-outfit-card\">\n                    <div className=\"scheduled-outfit-date\">\n                      <h3>{formatDate(schedule.date)}</h3>\n                    </div>\n                    <div className=\"scheduled-outfit-details\">\n                      <h4>{schedule.outfit?.name}</h4>\n                      {schedule.outfit?.occasion && (\n                        <p className=\"outfit-occasion\">{schedule.outfit.occasion}</p>\n                      )}\n                      <div className=\"scheduled-outfit-preview\">\n                        {schedule.outfit?.items && getSortedItems(schedule.outfit.items).map((item) => (\n                          <img\n                            key={item.id}\n                            src={item.image_url}\n                            alt={item.name || item.category}\n                            className=\"scheduled-outfit-item-image\"\n                          />\n                        ))}\n                      </div>\n                    </div>\n                    <div className=\"scheduled-outfit-actions\">\n                      <button\n                        onClick={() => handleDeleteSchedule(schedule.id)}\n                        className=\"button button-danger\"\n                      >\n                        Remove\n                      </button>\n                    </div>\n                  </div>\n                ))\n              )}\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Save Outfit Modal */}\n      {showSaveModal && (\n        <div className=\"modal-overlay\">\n          <div className=\"modal-content\">\n            <h2 className=\"section-title\">Save Outfit</h2>\n            <div className=\"form-group\">\n              <label>Outfit Name:</label>\n              <input\n                type=\"text\"\n                value={outfitName}\n                onChange={(e) => setOutfitName(e.target.value)}\n                placeholder=\"Enter a name for your outfit\"\n                className=\"form-input\"\n              />\n            </div>\n            <div className=\"form-group\">\n              <label>Occasion (optional):</label>\n              <input\n                type=\"text\"\n                value={outfitOccasion}\n                onChange={(e) => setOutfitOccasion(e.target.value)}\n                placeholder=\"Enter an occasion\"\n                className=\"form-input\"\n              />\n            </div>\n            <div className=\"modal-actions\">\n              <button\n                onClick={() => {\n                  setShowSaveModal(false);\n                  setOutfitName('');\n                  setOutfitOccasion('');\n                }}\n                className=\"button button-secondary\"\n              >\n                Cancel\n              </button>\n              <button\n                onClick={handleSaveOutfit}\n                disabled={!outfitName}\n                className=\"button\"\n              >\n                Save\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Schedule Outfit Modal */}\n      {showScheduleModal && (\n        <div className=\"modal-overlay\">\n          <div className=\"modal-content\">\n            <h2 className=\"section-title\">Schedule Outfit</h2>\n            <div className=\"form-group\">\n              <label>Select Date:</label>\n              <input\n                type=\"date\"\n                value={scheduleDate}\n                onChange={(e) => setScheduleDate(e.target.value)}\n                className=\"form-input\"\n                min={new Date().toISOString().split('T')[0]}\n              />\n            </div>\n            <div className=\"scheduled-outfit-preview\">\n              <h3>{selectedOutfitForSchedule?.name}</h3>\n              {selectedOutfitForSchedule?.occasion && (\n                <p className=\"outfit-occasion\">{selectedOutfitForSchedule.occasion}</p>\n              )}\n              <div className=\"outfit-preview-grid\">\n                {selectedOutfitForSchedule?.items && getSortedItems(selectedOutfitForSchedule.items).map((item) => (\n                  <div key={item.id} className=\"outfit-preview-item\">\n                    <img\n                      src={item.image_url}\n                      alt={item.name || item.category}\n                      className=\"outfit-preview-image\"\n                    />\n                    <div className=\"outfit-preview-details\">\n                      <h3>{item.name || item.category}</h3>\n                      {item.brand && <p className=\"item-brand\">{item.brand}</p>}\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n            <div className=\"modal-actions\">\n              <button\n                onClick={() => {\n                  setShowScheduleModal(false);\n                  setSelectedOutfitForSchedule(null);\n                  setScheduleDate('');\n                }}\n                className=\"button button-secondary\"\n              >\n                Cancel\n              </button>\n              <button\n                onClick={handleScheduleOutfit}\n                disabled={!scheduleDate}\n                className=\"button\"\n              >\n                Schedule\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default OutfitPlanner; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}